<!DOCTYPE html><html lang="zh-TW" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>解析Linux磁盘 | Kalyan的小书房</title><meta name="keywords" content="linux"><meta name="author" content="Kalyan,3148862192@qq.com"><meta name="copyright" content="Kalyan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="磁盘方面磁盘分区分区概念在linux系统中，磁盘分区是一种物理硬盘分割成多个逻辑部分的方法，每个分区可以独立地进行管理和使用通常会分为  主分区：每个磁盘最多可以有四个主分区。需要更多地分区可以使用扩展分区。 扩展分区： 扩展分区本身不能直接用于存储数据，但可以包含多个逻辑分区。 逻辑分区： 位于扩展分区内地分区，可以超过四个限制。  分区职责 主分区：用于安装操作系统，存储数据，以及引导系统 扩">
<meta property="og:type" content="article">
<meta property="og:title" content="解析Linux磁盘">
<meta property="og:url" content="https://kalyan-zitiu.github.io/2024/07/08/%E8%A7%A3%E6%9E%90Linux%E7%A3%81%E7%9B%98/index.html">
<meta property="og:site_name" content="Kalyan的小书房">
<meta property="og:description" content="磁盘方面磁盘分区分区概念在linux系统中，磁盘分区是一种物理硬盘分割成多个逻辑部分的方法，每个分区可以独立地进行管理和使用通常会分为  主分区：每个磁盘最多可以有四个主分区。需要更多地分区可以使用扩展分区。 扩展分区： 扩展分区本身不能直接用于存储数据，但可以包含多个逻辑分区。 逻辑分区： 位于扩展分区内地分区，可以超过四个限制。  分区职责 主分区：用于安装操作系统，存储数据，以及引导系统 扩">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://kalyan-zitiu.github.io/img/WallPaper%20(71).jpg">
<meta property="article:published_time" content="2024-07-08T08:49:36.000Z">
<meta property="article:modified_time" content="2024-07-09T07:35:51.868Z">
<meta property="article:author" content="Kalyan">
<meta property="article:tag" content="linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://kalyan-zitiu.github.io/img/WallPaper%20(71).jpg"><link rel="shortcut icon" href="/img/%E9%A1%B6%E9%83%A8%E6%A0%87%E7%AD%BE(2).jpg"><link rel="canonical" href="https://kalyan-zitiu.github.io/2024/07/08/%E8%A7%A3%E6%9E%90Linux%E7%A3%81%E7%9B%98/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '複製成功',
    error: '複製錯誤',
    noSupport: '瀏覽器不支援'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '剛剛',
    min: '分鐘前',
    hour: '小時前',
    day: '天前',
    month: '個月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '解析Linux磁盘',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-09 15:35:51'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Kalyan的小书房" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">載入中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/%E5%A4%B4.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">54</div></a><a href="/tags/"><div class="headline">標籤</div><div class="length-num">36</div></a><a href="/categories/"><div class="headline">分類</div><div class="length-num">49</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 時間軸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清單</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音樂</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友鏈</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/WallPaper%20(71).jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Kalyan的小书房</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 時間軸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清單</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音樂</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友鏈</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">解析Linux磁盘</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">發表於</span><time class="post-meta-date-created" datetime="2024-07-08T08:49:36.000Z" title="發表於 2024-07-08 16:49:36">2024-07-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新於</span><time class="post-meta-date-updated" datetime="2024-07-09T07:35:51.868Z" title="更新於 2024-07-09 15:35:51">2024-07-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/linux/">linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="解析Linux磁盘"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">閱讀量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="磁盘方面"><a href="#磁盘方面" class="headerlink" title="磁盘方面"></a>磁盘方面</h3><h4 id="磁盘分区"><a href="#磁盘分区" class="headerlink" title="磁盘分区"></a>磁盘分区</h4><h5 id="分区概念"><a href="#分区概念" class="headerlink" title="分区概念"></a>分区概念</h5><p>在linux系统中，磁盘分区是一种物理硬盘分割成多个逻辑部分的方法，每个分区可以独立地进行管理和使用通常会分为</p>
<ul>
<li>主分区：每个磁盘最多可以有四个主分区。需要更多地分区可以使用扩展分区。</li>
<li>扩展分区： 扩展分区本身不能直接用于存储数据，但可以包含多个逻辑分区。</li>
<li>逻辑分区： 位于扩展分区内地分区，可以超过四个限制。</li>
</ul>
<h5 id="分区职责"><a href="#分区职责" class="headerlink" title="分区职责"></a>分区职责</h5><ul>
<li>主分区：用于安装操作系统，存储数据，以及引导系统</li>
<li>扩展分区：是用于包含逻辑分区的一个容器，解决主分区的限制，创建多个逻辑分区</li>
<li>逻辑分区：可以用来存储操作系统，应用程序和数据。</li>
</ul>
<h5 id="常见目录"><a href="#常见目录" class="headerlink" title="常见目录"></a>常见目录</h5><table>
<thead>
<tr>
<th>目录</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>/</code></td>
<td>根目录，包含系统中所有文件和目录的起点。</td>
</tr>
<tr>
<td><code>/bin</code></td>
<td>基本命令的二进制文件，如 <code>ls</code>、<code>cp</code>、<code>mv</code> 等。</td>
</tr>
<tr>
<td><code>/boot</code></td>
<td>存放启动加载器相关的文件和内核文件。</td>
</tr>
<tr>
<td><code>/dev</code></td>
<td>设备文件目录，包含所有设备的接口文件（如硬盘、终端）。</td>
</tr>
<tr>
<td><code>/etc</code></td>
<td>配置文件目录，包含系统和应用程序的所有配置文件。</td>
</tr>
<tr>
<td><code>/home</code></td>
<td>用户家目录，每个用户都有一个单独的子目录，用于存放个人文件和配置。</td>
</tr>
<tr>
<td><code>/lib</code></td>
<td>系统库文件目录，包含基本系统库和内核模块。</td>
</tr>
<tr>
<td><code>/media</code></td>
<td>自动挂载的可移动媒体设备（如CD-ROM、USB驱动器）。</td>
</tr>
<tr>
<td><code>/mnt</code></td>
<td>临时挂载文件系统的挂载点。</td>
</tr>
<tr>
<td><code>/opt</code></td>
<td>可选软件包目录，用于安装附加的第三方应用程序。</td>
</tr>
<tr>
<td><code>/proc</code></td>
<td>虚拟文件系统，提供系统和进程信息。</td>
</tr>
<tr>
<td><code>/root</code></td>
<td>超级用户（root）家目录。</td>
</tr>
<tr>
<td><code>/run</code></td>
<td>运行时数据，存放系统启动后产生的临时文件（如进程ID文件）。</td>
</tr>
<tr>
<td><code>/sbin</code></td>
<td>系统管理员命令的二进制文件，如 <code>fdisk</code>、<code>ifconfig</code> 等。</td>
</tr>
<tr>
<td><code>/srv</code></td>
<td>服务数据目录，存放特定服务的数据（如Web服务器文件）。</td>
</tr>
<tr>
<td><code>/sys</code></td>
<td>虚拟文件系统，提供内核设备和驱动程序信息。</td>
</tr>
<tr>
<td><code>/tmp</code></td>
<td>临时文件目录，存放临时文件，系统重启后可能会清空。</td>
</tr>
<tr>
<td><code>/usr</code></td>
<td>用户程序目录，包含二进制文件、库文件、文档等（如 <code>/usr/bin</code>、<code>/usr/lib</code>）。</td>
</tr>
<tr>
<td><code>/var</code></td>
<td>可变数据文件目录，存放日志文件、邮件、临时文件等（如 <code>/var/log</code>、<code>/var/mail</code>）。</td>
</tr>
</tbody></table>
<h4 id="MBR-Master-Boot-Record"><a href="#MBR-Master-Boot-Record" class="headerlink" title="MBR (Master Boot Record)"></a>MBR (Master Boot Record)</h4><ul>
<li>MBR是一种传统的磁盘分区表格式，它位于磁盘的第一个扇区。</li>
<li>MBR分区表最多支持4个主分区，如果需要更多分区，必须将其中一个主分区转换为扩展分区，再在扩展分区内创建逻辑分区。</li>
<li>由于使用32位地址，MBR最多支持2TB的磁盘。</li>
</ul>
<h5 id="逻辑结构"><a href="#逻辑结构" class="headerlink" title="逻辑结构"></a>逻辑结构</h5><ol>
<li><p><strong>主引导记录 (Master Boot Record)</strong></p>
<ul>
<li>位于磁盘的第一个扇区（LBA 0）。</li>
<li>大小为512字节。</li>
</ul>
</li>
<li><p><strong>主引导代码 (Boot Code)</strong></p>
<ul>
<li>前446字节存储主引导代码，用于启动操作系统。</li>
</ul>
</li>
<li><p><strong>分区表 (Partition Table)</strong></p>
<ul>
<li>紧随其后64字节（每个分区条目16字节，共4个条目）。</li>
<li>描述最多四个主分区或一个扩展分区的起始位置和大小。</li>
</ul>
</li>
<li><p><strong>签名 (Signature)</strong></p>
<ul>
<li>最后2字节为磁盘签名（0x55AA），标志主引导记录的结束。</li>
</ul>
</li>
<li><p><strong>扩展分区</strong></p>
<ul>
<li>如果需要超过四个分区，可以创建一个扩展分区（Extended Partition）。</li>
<li>扩展分区包含一个扩展引导记录 (EBR)，每个逻辑分区包含一个EBR。</li>
</ul>
</li>
</ol>
<h4 id="GPT-GUID-Partition-Table"><a href="#GPT-GUID-Partition-Table" class="headerlink" title="GPT (GUID Partition Table)"></a>GPT (GUID Partition Table)</h4><ul>
<li>GPT是一种现代的磁盘分区表格式，取代了传统的MBR。</li>
<li>GPT使用64位地址，可以支持超过8ZB的磁盘容量。</li>
<li>GPT最多可以支持128个主分区，没有扩展分区的限制。</li>
<li>GPT分区表有冗余备份和CRC校验，提高了数据的安全性和可靠性。</li>
</ul>
<h5 id="逻辑结构-1"><a href="#逻辑结构-1" class="headerlink" title="逻辑结构"></a>逻辑结构</h5><ol>
<li><p><strong>保护性MBR (Protective MBR)</strong></p>
<ul>
<li>位于磁盘的第一个扇区（LBA 0），防止旧版工具误读GPT磁盘。</li>
</ul>
</li>
<li><p><strong>主GPT头 (Primary GPT Header)</strong></p>
<ul>
<li>位于LBA 1，描述GPT分区表的总体信息。</li>
<li>包含GPT版本、头部大小、CRC32校验和等。</li>
</ul>
</li>
<li><p><strong>主分区表 (Primary Partition Table)</strong></p>
<ul>
<li>紧随其后，从LBA 2开始，一般占用32个扇区。</li>
<li>每个分区条目128字节，通常最多支持128个分区条目。</li>
</ul>
</li>
<li><p><strong>分区条目 (Partition Entries)</strong></p>
<ul>
<li>每个条目描述一个分区的GUID、类型GUID、起始LBA、结束LBA、属性标志等。</li>
</ul>
</li>
<li><p><strong>用户分区</strong></p>
<ul>
<li>从主分区表结束位置开始，存储实际的数据和文件系统。</li>
</ul>
</li>
<li><p><strong>备份分区表 (Backup Partition Table)</strong></p>
<ul>
<li>位于磁盘末尾，用于恢复主GPT头和分区表。</li>
</ul>
</li>
<li><p><strong>备份GPT头 (Backup GPT Header)</strong></p>
<ul>
<li>位于磁盘倒数第二个扇区，记录备份分区表的信息。</li>
</ul>
</li>
</ol>
<h4 id="Legacy-BIOS-引导"><a href="#Legacy-BIOS-引导" class="headerlink" title="Legacy / BIOS 引导"></a>Legacy / BIOS 引导</h4><p>Legacy/BIOS（Basic Input/Output System）引导是一种传统的计算机启动模式。它是PC兼容系统的早期固件接口，负责初始化硬件并引导操作系统。以下是详细的说明：</p>
<h5 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h5><ol>
<li><p><strong>电源自检（POST）</strong>:</p>
<ul>
<li>计算机启动时，BIOS首先进行电源自检（Power-On Self-Test），检查和初始化系统硬件，如内存、CPU、硬盘和外设。</li>
<li>如果POST过程中检测到错误，BIOS会通过蜂鸣声或屏幕错误信息提示用户。</li>
</ul>
</li>
<li><p><strong>查找引导设备</strong>:</p>
<ul>
<li>POST完成后，BIOS会根据预设的引导顺序查找可启动设备（如硬盘、光盘、U盘等）。</li>
<li>引导顺序通常可以在BIOS设置界面中配置。</li>
</ul>
</li>
<li><p><strong>加载引导扇区</strong>:</p>
<ul>
<li>一旦找到一个可引导的设备，BIOS会读取该设备的主引导记录（MBR，Master Boot Record），这通常是设备的第一个扇区（512字节）。</li>
<li>MBR包含了启动加载程序的初始部分以及分区表信息。</li>
</ul>
</li>
<li><p><strong>执行引导加载程序</strong>:</p>
<ul>
<li>BIOS将控制权交给MBR中的引导加载程序。这个程序进一步加载操作系统或更多的引导代码（例如，GRUB、LILO等引导加载程序）。</li>
</ul>
</li>
<li><p><strong>启动操作系统</strong>:</p>
<ul>
<li>引导加载程序最终加载操作系统内核，并将控制权交给它，操作系统开始初始化并进入用户模式。</li>
</ul>
</li>
</ol>
<h5 id="特点和限制"><a href="#特点和限制" class="headerlink" title="特点和限制"></a>特点和限制</h5><ul>
<li><strong>地址空间限制</strong>: BIOS模式只能使用传统的32位地址模式，无法利用超过4GB的内存空间。</li>
<li><strong>MBR分区限制</strong>: MBR分区表限制最大支持4个主分区，每个分区最大只能是2TB。</li>
<li><strong>兼容性</strong>: 由于其长期存在，BIOS模式具有广泛的硬件和软件兼容性。</li>
</ul>
<h5 id="设置和配置"><a href="#设置和配置" class="headerlink" title="设置和配置"></a>设置和配置</h5><ul>
<li><strong>进入BIOS设置</strong>: 通常通过在启动时按下特定的键（如F2、Del、Esc）进入BIOS设置界面。</li>
<li><strong>配置引导顺序</strong>: 在BIOS设置界面中，用户可以配置引导设备的优先级。</li>
<li><strong>启用/禁用设备</strong>: 可以在BIOS中启用或禁用某些硬件设备，以优化系统性能或解决兼容性问题。</li>
</ul>
<h4 id="UEFI"><a href="#UEFI" class="headerlink" title="UEFI"></a>UEFI</h4><p>UEFI（统一可扩展固件接口）是一种现代固件接口，用于替代传统的BIOS。它提供更强大的功能和更灵活的引导方式。以下是详细的UEFI启动流程和相关设置的教学：</p>
<h5 id="UEFI-启动流程"><a href="#UEFI-启动流程" class="headerlink" title="UEFI 启动流程"></a>UEFI 启动流程</h5><ol>
<li><p><strong>电源开启和硬件初始化</strong>:</p>
<ul>
<li>计算机启动时，UEFI固件首先进行硬件初始化和电源自检（POST，Power-On Self-Test）。</li>
<li>检查CPU、内存、存储设备和外设，确保它们工作正常。</li>
</ul>
</li>
<li><p><strong>进入UEFI固件界面</strong>:</p>
<ul>
<li>在启动过程中，用户可以按特定的键（如F2、Del、Esc）进入UEFI固件设置界面。</li>
</ul>
</li>
<li><p><strong>查找EFI系统分区（ESP）</strong>:</p>
<ul>
<li>UEFI固件会查找包含EFI系统分区（ESP）的存储设备。ESP是一个特殊的分区，用于存储EFI引导加载程序和相关文件。</li>
<li>ESP通常格式化为FAT32文件系统，并且标记为“EFI System Partition”。</li>
</ul>
</li>
<li><p><strong>加载EFI引导加载程序</strong>:</p>
<ul>
<li>在ESP中，UEFI固件查找引导加载程序文件，通常位于 <code>\EFI\Boot\bootx64.efi</code>（对于64位系统）。</li>
<li>用户可以在UEFI设置中指定特定的引导加载程序路径或更改引导顺序。</li>
</ul>
</li>
<li><p><strong>执行引导加载程序</strong>:</p>
<ul>
<li>UEFI将控制权交给引导加载程序。这个程序进一步加载操作系统的引导程序或内核。</li>
<li>常见的引导加载程序包括Windows Boot Manager、GRUB、Clover等。</li>
</ul>
</li>
<li><p><strong>启动操作系统</strong>:</p>
<ul>
<li>引导加载程序加载操作系统内核并将控制权交给它，操作系统开始初始化并进入用户模式。</li>
</ul>
</li>
</ol>
<h5 id="设置和配置UEFI"><a href="#设置和配置UEFI" class="headerlink" title="设置和配置UEFI"></a>设置和配置UEFI</h5><ol>
<li><p><strong>进入UEFI设置界面</strong>:</p>
<ul>
<li>重启计算机，在启动过程中按下特定的键（如F2、Del、Esc）进入UEFI设置界面。</li>
<li>不同品牌的主板可能有不同的按键，具体请参考主板或计算机手册。</li>
</ul>
</li>
<li><p><strong>配置引导顺序</strong>:</p>
<ul>
<li>在UEFI设置界面中，找到“Boot”或“启动”选项卡。</li>
<li>配置引导设备的优先级，将希望首先引导的设备设置为第一优先级。</li>
<li>如果需要从特定的EFI引导文件启动，可以手动指定路径。</li>
</ul>
</li>
<li><p><strong>启用/禁用设备</strong>:</p>
<ul>
<li>在“Advanced”或“高级”选项卡中，可以启用或禁用某些硬件设备。</li>
<li>例如，启用/禁用USB端口、网卡、SATA接口等。</li>
</ul>
</li>
<li><p><strong>安全启动（Secure Boot）</strong>:</p>
<ul>
<li>安全启动是一项UEFI功能，用于防止加载未签名或未经授权的操作系统引导程序。</li>
<li>在“Security”或“安全”选项卡中，可以启用或禁用安全启动。</li>
<li>如果需要安装非官方签名的操作系统，可能需要暂时禁用安全启动。</li>
</ul>
</li>
<li><p><strong>保存和退出</strong>:</p>
<ul>
<li>完成设置后，选择“Save &amp; Exit”或“保存并退出”选项。</li>
<li>保存设置后，系统将重新启动并应用新的设置。</li>
</ul>
</li>
</ol>
<h4 id="sar"><a href="#sar" class="headerlink" title="sar"></a>sar</h4><p><code>sar</code>（System Activity Reporter）是一个强大的工具，用于在Linux系统上收集、报告和保存系统活动信息。它可以提供有关系统性能的详细数据，包括CPU、内存、网络、磁盘I/O等多个方面。<code>sar</code>命令通常与<code>sysstat</code>软件包一起使用。下面是如何使用<code>sar</code>命令来监控磁盘活动的步骤：</p>
<h5 id="安装sysstat包"><a href="#安装sysstat包" class="headerlink" title="安装sysstat包"></a>安装sysstat包</h5><p>在大多数Linux发行版中，可以通过包管理器安装<code>sysstat</code>包：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 对于基于Debian的系统（如Ubuntu）</span></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install sysstat</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对于基于RHEL的系统（如CentOS）</span></span><br><span class="line">sudo yum install sysstat</span><br></pre></td></tr></table></figure>

<h5 id="启用和配置sysstat"><a href="#启用和配置sysstat" class="headerlink" title="启用和配置sysstat"></a>启用和配置sysstat</h5><p>安装完成后，确保<code>sysstat</code>服务已启用并正在运行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 启用sysstat服务</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> sysstat</span><br><span class="line">sudo systemctl start sysstat</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置sysstat以启用数据收集</span></span><br><span class="line">sudo nano /etc/default/sysstat</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将ENABLED=&quot;false&quot;修改为ENABLED=&quot;true&quot;</span></span><br><span class="line">ENABLED=<span class="string">&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存并退出编辑器</span></span><br></pre></td></tr></table></figure>

<h5 id="使用sar监控磁盘I-O"><a href="#使用sar监控磁盘I-O" class="headerlink" title="使用sar监控磁盘I/O"></a>使用sar监控磁盘I/O</h5><p><code>sar</code>可以通过<code>-d</code>选项来监控磁盘I/O活动：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 实时监控磁盘I/O，每1秒报告一次，共报告10次</span></span><br><span class="line">sar -d 1 10</span><br></pre></td></tr></table></figure>

<h5 id="常用选项"><a href="#常用选项" class="headerlink" title="常用选项"></a>常用选项</h5><ul>
<li><code>-d</code>：报告磁盘I/O统计信息。</li>
<li><code>-p</code>：将设备名称从设备编号翻译为设备名称。</li>
<li><code>-r</code>：报告内存和交换空间使用情况。</li>
<li><code>-n</code>：报告网络统计信息（如<code>-n DEV</code>报告网络接口统计信息）。</li>
<li><code>-u</code>：报告CPU使用情况。</li>
</ul>
<h5 id="查看历史数据"><a href="#查看历史数据" class="headerlink" title="查看历史数据"></a>查看历史数据</h5><p><code>sar</code>命令可以查看过去的系统性能数据，这些数据通常保存在<code>/var/log/sa/</code>目录中：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看特定日期的磁盘I/O活动（例如2024年7月5日）</span></span><br><span class="line">sar -d -f /var/log/sa/sa05</span><br></pre></td></tr></table></figure>

<h5 id="示例输出解读"><a href="#示例输出解读" class="headerlink" title="示例输出解读"></a>示例输出解读</h5><p><img src="https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/image-20240709151241420.png" alt="image-20240709151241420"></p>
<p>以下是<code>sar -d</code>命令的示例输出及其含义：</p>
<ul>
<li><code>tps</code>：每秒传输数（读+写）。</li>
<li><code>rd_sec/s</code>：每秒读取的扇区数。</li>
<li><code>wr_sec/s</code>：每秒写入的扇区数。</li>
<li><code>avgrq-sz</code>：平均请求大小（扇区）。</li>
<li><code>avgqu-sz</code>：平均请求队列长度。</li>
<li><code>await</code>：每个I/O操作的平均等待时间（毫秒）。</li>
<li><code>svctm</code>：每个I/O操作的平均服务时间（毫秒）。</li>
<li><code>%util</code>：设备的I/O使用百分比。</li>
</ul>
<p>使用<code>sar</code>工具可以帮助系统管理员深入了解系统性能瓶颈并进行相应的优化。</p>
<h4 id="RAID"><a href="#RAID" class="headerlink" title="RAID"></a>RAID</h4><p>RAID（Redundant Array of Independent Disks，即独立磁盘冗余阵列）是一种将多个物理硬盘驱动器组合成一个逻辑单元的存储技术。其主要目的是提高数据存储的性能、容量和可靠性。RAID技术通过不同的配置（称为RAID级别）来实现这些目标。以下是几种常见的RAID级别：</p>
<ol>
<li><p><strong>RAID 0</strong>：</p>
<ul>
<li><strong>条带化（Striping）</strong>：数据在多个磁盘上分割并并行写入。</li>
<li><strong>优点</strong>：提高读写速度。</li>
<li><strong>缺点</strong>：没有冗余，任何一个磁盘故障都会导致数据丢失。</li>
</ul>
</li>
<li><p><strong>RAID 1</strong>：</p>
<ul>
<li><strong>镜像（Mirroring）</strong>：每个数据块都在两个或多个磁盘上复制。</li>
<li><strong>优点</strong>：提供高冗余，数据安全性高。</li>
<li><strong>缺点</strong>：磁盘利用率低（50%），只使用了一半的存储容量。</li>
</ul>
</li>
<li><p><strong>RAID 5</strong>：</p>
<ul>
<li><strong>分布式奇偶校验（Distributed Parity）</strong>：数据和奇偶校验信息分布在所有磁盘上。</li>
<li><strong>优点</strong>：平衡了性能、容量和数据安全性，至少需要3个磁盘。</li>
<li><strong>缺点</strong>：写操作较慢，因为需要计算和写入奇偶校验数据。</li>
</ul>
</li>
<li><p><strong>RAID 6</strong>：</p>
<ul>
<li><strong>双奇偶校验（Double Parity）</strong>：类似RAID 5，但有两组奇偶校验数据，容忍两块磁盘同时故障。</li>
<li><strong>优点</strong>：更高的数据安全性。</li>
<li><strong>缺点</strong>：写操作更慢，磁盘利用率较低。</li>
</ul>
</li>
<li><p><strong>RAID 10（或1+0）</strong>：</p>
<ul>
<li><strong>条带化和镜像结合</strong>：先进行镜像，再进行条带化。</li>
<li><strong>优点</strong>：结合了RAID 0和RAID 1的优点，高性能和高冗余。</li>
<li><strong>缺点</strong>：需要较多的磁盘，成本较高。</li>
</ul>
</li>
<li><p><strong>RAID 50（或5+0）</strong>：</p>
<ul>
<li><strong>条带化和分布式奇偶校验结合</strong>：将RAID 5阵列条带化。</li>
<li><strong>优点</strong>：提高了性能和冗余，适合大规模存储需求。</li>
<li><strong>缺点</strong>：复杂度增加，需要更多磁盘。</li>
</ul>
</li>
</ol>
<h4 id="fdisk"><a href="#fdisk" class="headerlink" title="fdisk"></a>fdisk</h4><p>fdisk 是用于操作磁盘分区的工具，适用于 MBR 分区表。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
<th>使用说明</th>
</tr>
</thead>
<tbody><tr>
<td>m</td>
<td>显示帮助菜单</td>
<td>显示所有可用命令的列表和简要说明。</td>
</tr>
<tr>
<td>p</td>
<td>显示当前分区表</td>
<td>列出指定磁盘上的所有分区信息。</td>
</tr>
<tr>
<td>n</td>
<td>添加一个新分区</td>
<td>根据提示选择主分区或逻辑分区，并设置分区的开始和结束位置。</td>
</tr>
<tr>
<td>d</td>
<td>删除一个分区</td>
<td>选择要删除的分区编号。</td>
</tr>
<tr>
<td>l</td>
<td>列出已知分区类型</td>
<td>显示支持的所有分区类型代码和说明。</td>
</tr>
<tr>
<td>t</td>
<td>更改一个分区的系统ID</td>
<td>选择分区后，输入新的类型代码。</td>
</tr>
<tr>
<td>a</td>
<td>切换启动标志</td>
<td>设置或取消某个分区的启动标志（使其可引导）。</td>
</tr>
<tr>
<td>w</td>
<td>写入分区表并退出</td>
<td>将对分区所做的更改写入磁盘，并退出fdisk。</td>
</tr>
<tr>
<td>q</td>
<td>不保存更改并退出</td>
<td>退出fdisk而不保存对分区表的任何更改。</td>
</tr>
</tbody></table>
<h5 id="创建新分区"><a href="#创建新分区" class="headerlink" title="创建新分区"></a>创建新分区</h5><ol>
<li>输入<code>n</code>创建新分区。</li>
<li>选择分区类型（主分区<code>p</code>或逻辑分区<code>e</code>）。</li>
<li>指定分区号（例如<code>1</code>）。</li>
<li>指定分区的起始扇区和结束扇区。</li>
<li>输入<code>w</code>保存并退出。</li>
</ol>
<h5 id="删除分区"><a href="#删除分区" class="headerlink" title="删除分区"></a>删除分区</h5><ol>
<li>输入<code>p</code>查看当前分区表。</li>
<li>输入<code>d</code>删除分区。</li>
<li>输入要删除的分区编号（例如<code>1</code>）。</li>
<li>输入<code>w</code>保存并退出。</li>
</ol>
<h5 id="更改分区类型"><a href="#更改分区类型" class="headerlink" title="更改分区类型"></a>更改分区类型</h5><ol>
<li>输入<code>t</code>更改分区类型。</li>
<li>输入分区编号（例如<code>1</code>）。</li>
<li>输入新的类型代码（例如<code>83</code>用于Linux分区）。</li>
<li>输入<code>w</code>保存并退出。</li>
</ol>
<p><img src="https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/image-20240709125834777.png" alt="image-20240709125834777"></p>
<h4 id="parted"><a href="#parted" class="headerlink" title="parted"></a>parted</h4><p>fdisk 是用于操作磁盘分区的工具，适用于 GPT分区表。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
<th>使用说明</th>
</tr>
</thead>
<tbody><tr>
<td>mklabel</td>
<td>创建新的磁盘标签（分区表）</td>
<td>格式：<code>mklabel &lt;label&gt;</code>，其中<code>label</code>可以是<code>gpt</code>、<code>msdos</code>等。</td>
</tr>
<tr>
<td>mkpart</td>
<td>创建新分区</td>
<td>格式：<code>mkpart &lt;part-type&gt; &lt;fs-type&gt; &lt;start&gt; &lt;end&gt;</code>，例如<code>mkpart primary ext4 1MiB 500MiB</code>。</td>
</tr>
<tr>
<td>rm</td>
<td>删除分区</td>
<td>格式：<code>rm &lt;number&gt;</code>，其中<code>number</code>是分区编号。</td>
</tr>
<tr>
<td>print</td>
<td>显示分区表</td>
<td>列出指定磁盘上的所有分区信息。</td>
</tr>
<tr>
<td>name</td>
<td>给分区命名</td>
<td>格式：<code>name &lt;number&gt; &lt;name&gt;</code>，给指定编号的分区命名。</td>
</tr>
<tr>
<td>set</td>
<td>设置分区标志</td>
<td>格式：`set <number> <flag> &lt;on</td>
</tr>
<tr>
<td>resizepart</td>
<td>调整分区大小</td>
<td>格式：<code>resizepart &lt;number&gt; &lt;end&gt;</code>，将分区调整到新的结束位置。</td>
</tr>
<tr>
<td>move</td>
<td>移动分区</td>
<td>格式：<code>move &lt;number&gt; &lt;start&gt; &lt;end&gt;</code>，移动分区到新的位置。</td>
</tr>
<tr>
<td>mkfs</td>
<td>创建文件系统</td>
<td>格式：<code>mkfs &lt;number&gt; &lt;fs-type&gt;</code>，例如<code>mkfs 1 ext4</code>。</td>
</tr>
<tr>
<td>align-check</td>
<td>检查分区对齐</td>
<td>格式：<code>align-check &lt;opt&gt; &lt;number&gt;</code>，例如<code>align-check optimal 1</code>。</td>
</tr>
<tr>
<td>rescue</td>
<td>尝试恢复丢失的分区</td>
<td>格式：<code>rescue &lt;start&gt; &lt;end&gt;</code>，尝试在指定范围内恢复分区。</td>
</tr>
<tr>
<td>quit</td>
<td>退出parted</td>
<td>退出parted交互模式。</td>
</tr>
<tr>
<td>unit</td>
<td>设置显示单位</td>
<td>格式：<code>unit &lt;unit&gt;</code>，其中<code>unit</code>可以是<code>s</code>(扇区)、<code>MB</code>、<code>GB</code>等。</td>
</tr>
</tbody></table>
<h5 id="启动parted"><a href="#启动parted" class="headerlink" title="启动parted"></a>启动parted</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo parted /dev/sdb</span><br></pre></td></tr></table></figure>

<h5 id="创建新的分区表（GPT）"><a href="#创建新的分区表（GPT）" class="headerlink" title="创建新的分区表（GPT）"></a>创建新的分区表（GPT）</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(parted) mklabel gpt</span><br></pre></td></tr></table></figure>

<h5 id="创建新分区-1"><a href="#创建新分区-1" class="headerlink" title="创建新分区"></a>创建新分区</h5><p>创建一个从1MiB开始，500MiB结束的主分区，文件系统类型为ext4：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(parted) mkpart primary ext4 1MiB 500MiB</span><br></pre></td></tr></table></figure>

<h5 id="删除分区-1"><a href="#删除分区-1" class="headerlink" title="删除分区"></a>删除分区</h5><p>删除刚才创建的第一个分区：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(parted) <span class="built_in">rm</span> 1</span><br></pre></td></tr></table></figure>

<h5 id="调整分区大小"><a href="#调整分区大小" class="headerlink" title="调整分区大小"></a>调整分区大小</h5><p>假设重新创建了一个分区，现在调整其大小到1000MiB：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(parted) mkpart primary ext4 1MiB 500MiB</span><br><span class="line">(parted) resizepart 1 1000MiB</span><br></pre></td></tr></table></figure>

<h5 id="设置分区标志"><a href="#设置分区标志" class="headerlink" title="设置分区标志"></a>设置分区标志</h5><p>设置第一个分区的启动标志：</p>
<p>可设置的标识有：</p>
<p><code>boot</code>：引导分区</p>
<p><code>esp</code>：EFI系统分区（通常用于UEFI引导）</p>
<p><code>lvm</code>：逻辑卷管理</p>
<p><code>raid</code>：RAID分区</p>
<p><code>swap</code>：交换分区</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(parted) <span class="built_in">set</span> &lt;分区编号&gt; &lt;标识&gt; on</span><br></pre></td></tr></table></figure>

<h5 id="显示分区表"><a href="#显示分区表" class="headerlink" title="显示分区表"></a>显示分区表</h5><p>显示当前的分区表：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(parted) <span class="built_in">print</span></span><br></pre></td></tr></table></figure>

<h5 id="给分区命名"><a href="#给分区命名" class="headerlink" title="给分区命名"></a>给分区命名</h5><p>给第一个分区命名：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(parted) name 1 my_partition</span><br></pre></td></tr></table></figure>

<h5 id="创建文件系统"><a href="#创建文件系统" class="headerlink" title="创建文件系统"></a>创建文件系统</h5><p>在第一个分区上创建ext4文件系统：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(parted) mkfs 1 ext4</span><br></pre></td></tr></table></figure>

<h6 id="文件类型"><a href="#文件类型" class="headerlink" title="文件类型"></a>文件类型</h6><ol>
<li><p><strong>ext4</strong>：</p>
<ul>
<li>目前最广泛使用的Linux文件系统，ext4具有良好的性能、稳定性和兼容性，支持大文件和大容量存储，适用于大多数应用场景。</li>
</ul>
</li>
<li><p><strong>XFS</strong>：</p>
<ul>
<li>XFS是一个高性能的日志文件系统，擅长处理大文件和高并发环境，常用于需要高性能和可扩展性的服务器和存储系统。</li>
</ul>
</li>
<li><p><strong>Btrfs</strong>：</p>
<ul>
<li>Btrfs（B-tree FS）支持快照、压缩、多设备存储池、在线文件系统检查和修复等高级功能，适用于需要高级数据管理和灵活性的环境。</li>
</ul>
</li>
<li><p>**ZFS on Linux (ZoL)**：</p>
<ul>
<li>ZFS具有高度的数据完整性、快照和复制等高级特性，适用于高存储要求的环境，如服务器和大型存储系统。</li>
</ul>
</li>
</ol>
<h5 id="检查分区对齐"><a href="#检查分区对齐" class="headerlink" title="检查分区对齐"></a>检查分区对齐</h5><p>检查第一个分区的对齐情况：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(parted) align-check optimal 1</span><br></pre></td></tr></table></figure>

<h5 id="尝试恢复丢失的分区"><a href="#尝试恢复丢失的分区" class="headerlink" title="尝试恢复丢失的分区"></a>尝试恢复丢失的分区</h5><p>假设分区丢失，尝试在指定范围内恢复分区：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(parted) rescue 1MiB 1000MiB</span><br></pre></td></tr></table></figure>

<h5 id="退出parted"><a href="#退出parted" class="headerlink" title="退出parted"></a>退出parted</h5><p>退出parted：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(parted) quit</span><br></pre></td></tr></table></figure>

<h5 id="验证操作"><a href="#验证操作" class="headerlink" title="验证操作"></a>验证操作</h5><p>为了验证这些操作，可以使用<code>lsblk</code>或<code>fdisk -l</code>来查看分区表：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo lsblk</span><br><span class="line">sudo fdisk -l /dev/sdb</span><br></pre></td></tr></table></figure>

<p>系统中没有parted工具，可以通过以下命令安装：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install parted  <span class="comment"># Debian/Ubuntu</span></span><br><span class="line">sudo yum install parted      <span class="comment"># CentOS/RHEL</span></span><br><span class="line">sudo dnf install parted      <span class="comment"># Fedora</span></span><br></pre></td></tr></table></figure>

<h4 id="LVM"><a href="#LVM" class="headerlink" title="LVM"></a>LVM</h4><p>LVM 是一种逻辑卷管理器，允许对硬盘和其他存储设备进行灵活的分区管理。</p>
<p>ps: 逻辑卷是由LVM创建和管理的虚拟存储单元，可以跨越多个物理磁盘或分区。逻辑卷是建立在物理卷之上，物理卷可以是整个磁盘分区或RAID设备。</p>
<h5 id="为什么要用到LVM"><a href="#为什么要用到LVM" class="headerlink" title="为什么要用到LVM"></a>为什么要用到LVM</h5><p>有工具就是因为有需求，传统的分区因为固定分区大小，需要停机调整分区，影响服务可用。所以需要用到LVM，在线扩展逻辑卷的大小无需停机，只需要添加新的物理硬盘到卷组（VG）中，然后扩展逻辑卷（LV）大小。除此之外，还能够快速创建备份，不需要传统的长时间锁定数据库，还能够整合多个磁盘设备成为一个存储池，能够在数据迁移阶段，避免长时间停机。</p>
<h5 id="怎么查看逻辑卷"><a href="#怎么查看逻辑卷" class="headerlink" title="怎么查看逻辑卷"></a>怎么查看逻辑卷</h5><h6 id="了解大概的可用块设备"><a href="#了解大概的可用块设备" class="headerlink" title="了解大概的可用块设备"></a>了解大概的可用块设备</h6><p>这张图片显示了<code>lsblk</code>命令的输出，列出了系统中的所有块设备及其挂载点。以下是对这张图片的详细描述：</p>
<ol>
<li><p><strong>loop设备</strong>：</p>
<ul>
<li><strong>loop0</strong>: 111.9M, 类型为loop，挂载在<code>/snap/lxd/24322</code></li>
<li><strong>loop1</strong>: 87M, 类型为loop，挂载在<code>/snap/lxd/28373</code></li>
<li><strong>loop2</strong>: 53.3M, 类型为loop，挂载在<code>/snap/snapd/19457</code></li>
<li><strong>loop3</strong>: 38.8M, 类型为loop，挂载在<code>/snap/core20/1974</code></li>
<li><strong>loop4</strong>: 63.9M, 类型为loop，挂载在<code>/snap/core20/2318</code></li>
<li><strong>loop5</strong>: 63.9M, 类型为loop，挂载在<code>/snap/core20/2456</code></li>
</ul>
</li>
<li><p><strong>物理磁盘</strong>：</p>
<ul>
<li><p>sda</p>
<p>: 25G, 类型为disk</p>
<ul>
<li><strong>sda1</strong>: 1M, 类型为part，没有挂载点（这可能是BIOS引导分区或其他用途的特殊分区）</li>
<li><strong>sda2</strong>: 2G, 类型为part，挂载在<code>/boot</code></li>
<li><strong>sda3</strong>: 23G, 类型为part，没有挂载点（这可能是LVM物理卷）</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>逻辑卷管理器（LVM）</strong>：</p>
<ul>
<li><strong>ubuntu–vg-ubuntu–lv</strong>: 12.5G, 类型为lvm，挂载在<code>/</code></li>
</ul>
</li>
<li><p><strong>光驱设备</strong>：</p>
<ul>
<li><strong>sr0</strong>: 2G, 类型为rom，没有挂载点</li>
</ul>
</li>
<li></li>
</ol>
<ul>
<li><p><strong>loop设备</strong>：这些是虚拟设备，通常用于挂载磁盘映像文件。</p>
</li>
<li><p>sda</p>
<p>：这是系统中的一个物理磁盘，包含三个分区（sda1, sda2, sda3）。</p>
<ul>
<li><strong>sda1</strong>：非常小，只有1M，通常用于系统引导或其他特殊用途。</li>
<li><strong>sda2</strong>：挂载在<code>/boot</code>，通常用于存放启动加载程序和内核。</li>
<li><strong>sda3</strong>：较大，为23G，可能用于LVM管理。</li>
</ul>
</li>
<li><p><strong>LVM逻辑卷</strong>：<code>ubuntu--vg-ubuntu--lv</code>是一个逻辑卷，挂载在根目录<code>/</code>。这表示LVM在管理这个分区的存储。</p>
</li>
<li><p><strong>光驱设备（sr0）</strong>：显示为2G，未挂载。</p>
</li>
</ul>
<p><img src="https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/image-20240709110545123.png" alt="image-20240709110545123"></p>
<h6 id="扩展逻辑卷大概步骤"><a href="#扩展逻辑卷大概步骤" class="headerlink" title="扩展逻辑卷大概步骤"></a>扩展逻辑卷大概步骤</h6><ol>
<li>添加新物理硬盘</li>
<li>将新的物理硬盘初始化为物理卷(PV)</li>
<li>将PV添加到现在的卷组VG</li>
<li>扩展逻辑卷LV的大小</li>
</ol>
<ul>
<li><strong>示例</strong>: 创建一个逻辑卷</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建物理卷</span></span><br><span class="line">pvcreate /dev/sdb</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建卷组</span></span><br><span class="line">vgcreate myvg /dev/sdb</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建逻辑卷</span></span><br><span class="line">lvcreate -L 10G -n mylv myvg</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">格式化逻辑卷</span></span><br><span class="line">mkfs.ext4 /dev/myvg/mylv</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建挂载点</span></span><br><span class="line">mkdir /mnt/kalyantest</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">挂载载目录上（ps：一个逻辑卷只能挂载一个目录）</span></span><br><span class="line">mount /mnt/kalyantest</span><br></pre></td></tr></table></figure>

<h6 id="实操"><a href="#实操" class="headerlink" title="实操"></a>实操</h6><p>创建lvm分区以及扩容</p>
<ol>
<li>首先增加物理盘<br><img src="https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/image-20240709114035255.png" alt="image-20240709114035255"></li>
<li>然后查询存储块</li>
</ol>
<p><img src="https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/image-20240709114244596.png" alt="image-20240709114244596"></p>
<ol start="3">
<li>为物理盘建立分区</li>
</ol>
<p><img src="https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/image-20240709114615916.png" alt="image-20240709114615916"></p>
<ol start="4">
<li>创建PV，VG，LV</li>
</ol>
<p><img src="https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/image-20240709115109564.png" alt="image-20240709115109564"></p>
<ol start="5">
<li>格式化lv<pre><code>![image-20240709115309348](https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/image-20240709115309348.png)
</code></pre>
</li>
<li>创建挂载目录（也可挂载在你想挂载的地方），并进行挂载(ps:记得修改etc/fstab文件，不然重启会丢失mount点)</li>
</ol>
<p><img src="https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/image-20240709115612877.png" alt="image-20240709115612877"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://kalyan-zitiu.github.io">Kalyan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章連結: </span><span class="post-copyright-info"><a href="https://kalyan-zitiu.github.io/2024/07/08/%E8%A7%A3%E6%9E%90Linux%E7%A3%81%E7%9B%98/">https://kalyan-zitiu.github.io/2024/07/08/%E8%A7%A3%E6%9E%90Linux%E7%A3%81%E7%9B%98/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版權聲明: </span><span class="post-copyright-info">本部落格所有文章除特別聲明外，均採用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 許可協議。轉載請註明來自 <a href="https://kalyan-zitiu.github.io" target="_blank">Kalyan的小书房</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/linux/">linux</a></div><div class="post_share"><div class="social-share" data-image="/img/WallPaper%20(71).jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/07/10/%E8%A7%A3%E6%9E%90Linux%E7%BD%91%E7%BB%9C/"><img class="prev-cover" src="/img/WallPaper%20(72).jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">解析Linux网络</div></div></a></div><div class="next-post pull-right"><a href="/2024/07/07/%E5%8D%9A%E5%AE%A2%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99/"><img class="next-cover" src="/img/WallPaper%20(69).jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Blog脚本编写</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 評論</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/%E5%A4%B4.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Kalyan</div><div class="author-info__description">晚来天欲雪，能饮一杯无</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">54</div></a><a href="/tags/"><div class="headline">標籤</div><div class="length-num">36</div></a><a href="/categories/"><div class="headline">分類</div><div class="length-num">49</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Kalyan-zitiu"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://www.douyin.com/user/MS4wLjABAAAA7q-IFMvdT163sFGcjg26o0XaCDYW4pJOLWdkgoDUz10" target="_blank" title="TikTok"><i class="fa-brands fa-tiktok"></i></a><a class="social-icon" href="https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/202211122041246.jpg" target="_blank" title=""><i class="fa-regular fa-user"></i></a><a class="social-icon" href="https://chat.zitiu.top/" target="_blank" title="ChatGPT"><i class="fa-solid fa-robot"></i></a><a class="social-icon" href="https://auto.kalyan-dao.space/" target="_blank" title="AutoGPT"><i class="fa-solid fa-shuttle-space"></i></a><a class="social-icon" href="https://chat.zhile.io/" target="_blank" title="FakeGPT"><i class="fa-brands fa-kickstarter"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Everybody pay attention, I'm the boss</div><timing></timing></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目錄</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E6%96%B9%E9%9D%A2"><span class="toc-number">1.</span> <span class="toc-text">磁盘方面</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA"><span class="toc-number">1.1.</span> <span class="toc-text">磁盘分区</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E5%8C%BA%E6%A6%82%E5%BF%B5"><span class="toc-number">1.1.1.</span> <span class="toc-text">分区概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E5%8C%BA%E8%81%8C%E8%B4%A3"><span class="toc-number">1.1.2.</span> <span class="toc-text">分区职责</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9B%AE%E5%BD%95"><span class="toc-number">1.1.3.</span> <span class="toc-text">常见目录</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MBR-Master-Boot-Record"><span class="toc-number">1.2.</span> <span class="toc-text">MBR (Master Boot Record)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.1.</span> <span class="toc-text">逻辑结构</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GPT-GUID-Partition-Table"><span class="toc-number">1.3.</span> <span class="toc-text">GPT (GUID Partition Table)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84-1"><span class="toc-number">1.3.1.</span> <span class="toc-text">逻辑结构</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Legacy-BIOS-%E5%BC%95%E5%AF%BC"><span class="toc-number">1.4.</span> <span class="toc-text">Legacy &#x2F; BIOS 引导</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">1.4.1.</span> <span class="toc-text">工作原理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E7%82%B9%E5%92%8C%E9%99%90%E5%88%B6"><span class="toc-number">1.4.2.</span> <span class="toc-text">特点和限制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%92%8C%E9%85%8D%E7%BD%AE"><span class="toc-number">1.4.3.</span> <span class="toc-text">设置和配置</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UEFI"><span class="toc-number">1.5.</span> <span class="toc-text">UEFI</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#UEFI-%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B"><span class="toc-number">1.5.1.</span> <span class="toc-text">UEFI 启动流程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%92%8C%E9%85%8D%E7%BD%AEUEFI"><span class="toc-number">1.5.2.</span> <span class="toc-text">设置和配置UEFI</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sar"><span class="toc-number">1.6.</span> <span class="toc-text">sar</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%89%E8%A3%85sysstat%E5%8C%85"><span class="toc-number">1.6.1.</span> <span class="toc-text">安装sysstat包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%AF%E7%94%A8%E5%92%8C%E9%85%8D%E7%BD%AEsysstat"><span class="toc-number">1.6.2.</span> <span class="toc-text">启用和配置sysstat</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8sar%E7%9B%91%E6%8E%A7%E7%A3%81%E7%9B%98I-O"><span class="toc-number">1.6.3.</span> <span class="toc-text">使用sar监控磁盘I&#x2F;O</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9"><span class="toc-number">1.6.4.</span> <span class="toc-text">常用选项</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%8E%86%E5%8F%B2%E6%95%B0%E6%8D%AE"><span class="toc-number">1.6.5.</span> <span class="toc-text">查看历史数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E8%BE%93%E5%87%BA%E8%A7%A3%E8%AF%BB"><span class="toc-number">1.6.6.</span> <span class="toc-text">示例输出解读</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RAID"><span class="toc-number">1.7.</span> <span class="toc-text">RAID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fdisk"><span class="toc-number">1.8.</span> <span class="toc-text">fdisk</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%96%B0%E5%88%86%E5%8C%BA"><span class="toc-number">1.8.1.</span> <span class="toc-text">创建新分区</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%88%86%E5%8C%BA"><span class="toc-number">1.8.2.</span> <span class="toc-text">删除分区</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E5%88%86%E5%8C%BA%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.8.3.</span> <span class="toc-text">更改分区类型</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#parted"><span class="toc-number">1.9.</span> <span class="toc-text">parted</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8parted"><span class="toc-number">1.9.1.</span> <span class="toc-text">启动parted</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E5%88%86%E5%8C%BA%E8%A1%A8%EF%BC%88GPT%EF%BC%89"><span class="toc-number">1.9.2.</span> <span class="toc-text">创建新的分区表（GPT）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%96%B0%E5%88%86%E5%8C%BA-1"><span class="toc-number">1.9.3.</span> <span class="toc-text">创建新分区</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%88%86%E5%8C%BA-1"><span class="toc-number">1.9.4.</span> <span class="toc-text">删除分区</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B0%83%E6%95%B4%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F"><span class="toc-number">1.9.5.</span> <span class="toc-text">调整分区大小</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%88%86%E5%8C%BA%E6%A0%87%E5%BF%97"><span class="toc-number">1.9.6.</span> <span class="toc-text">设置分区标志</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E5%88%86%E5%8C%BA%E8%A1%A8"><span class="toc-number">1.9.7.</span> <span class="toc-text">显示分区表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%99%E5%88%86%E5%8C%BA%E5%91%BD%E5%90%8D"><span class="toc-number">1.9.8.</span> <span class="toc-text">给分区命名</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.9.9.</span> <span class="toc-text">创建文件系统</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.9.9.1.</span> <span class="toc-text">文件类型</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E5%88%86%E5%8C%BA%E5%AF%B9%E9%BD%90"><span class="toc-number">1.9.10.</span> <span class="toc-text">检查分区对齐</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%9D%E8%AF%95%E6%81%A2%E5%A4%8D%E4%B8%A2%E5%A4%B1%E7%9A%84%E5%88%86%E5%8C%BA"><span class="toc-number">1.9.11.</span> <span class="toc-text">尝试恢复丢失的分区</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%80%E5%87%BAparted"><span class="toc-number">1.9.12.</span> <span class="toc-text">退出parted</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E6%93%8D%E4%BD%9C"><span class="toc-number">1.9.13.</span> <span class="toc-text">验证操作</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#LVM"><span class="toc-number">1.10.</span> <span class="toc-text">LVM</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E5%88%B0LVM"><span class="toc-number">1.10.1.</span> <span class="toc-text">为什么要用到LVM</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E6%9F%A5%E7%9C%8B%E9%80%BB%E8%BE%91%E5%8D%B7"><span class="toc-number">1.10.2.</span> <span class="toc-text">怎么查看逻辑卷</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3%E5%A4%A7%E6%A6%82%E7%9A%84%E5%8F%AF%E7%94%A8%E5%9D%97%E8%AE%BE%E5%A4%87"><span class="toc-number">1.10.2.1.</span> <span class="toc-text">了解大概的可用块设备</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E9%80%BB%E8%BE%91%E5%8D%B7%E5%A4%A7%E6%A6%82%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.10.2.2.</span> <span class="toc-text">扩展逻辑卷大概步骤</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E6%93%8D"><span class="toc-number">1.10.2.3.</span> <span class="toc-text">实操</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/07/17/Kubernetes%E6%9C%8D%E5%8A%A1/" title="Kubernetes服务基础"><img src="/img/WallPaper%20(76).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes服务基础"/></a><div class="content"><a class="title" href="/2024/07/17/Kubernetes%E6%9C%8D%E5%8A%A1/" title="Kubernetes服务基础">Kubernetes服务基础</a><time datetime="2024-07-17T05:26:24.000Z" title="發表於 2024-07-17 13:26:24">2024-07-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/10/%E8%A7%A3%E6%9E%90Linux%E6%96%87%E4%BB%B6/" title="解析Linux文件"><img src="/img/WallPaper%20(73).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="解析Linux文件"/></a><div class="content"><a class="title" href="/2024/07/10/%E8%A7%A3%E6%9E%90Linux%E6%96%87%E4%BB%B6/" title="解析Linux文件">解析Linux文件</a><time datetime="2024-07-10T03:47:16.000Z" title="發表於 2024-07-10 11:47:16">2024-07-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/10/%E8%A7%A3%E6%9E%90Linux%E7%BD%91%E7%BB%9C/" title="解析Linux网络"><img src="/img/WallPaper%20(72).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="解析Linux网络"/></a><div class="content"><a class="title" href="/2024/07/10/%E8%A7%A3%E6%9E%90Linux%E7%BD%91%E7%BB%9C/" title="解析Linux网络">解析Linux网络</a><time datetime="2024-07-10T01:39:02.000Z" title="發表於 2024-07-10 09:39:02">2024-07-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/08/%E8%A7%A3%E6%9E%90Linux%E7%A3%81%E7%9B%98/" title="解析Linux磁盘"><img src="/img/WallPaper%20(71).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="解析Linux磁盘"/></a><div class="content"><a class="title" href="/2024/07/08/%E8%A7%A3%E6%9E%90Linux%E7%A3%81%E7%9B%98/" title="解析Linux磁盘">解析Linux磁盘</a><time datetime="2024-07-08T08:49:36.000Z" title="發表於 2024-07-08 16:49:36">2024-07-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/07/%E5%8D%9A%E5%AE%A2%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99/" title="Blog脚本编写"><img src="/img/WallPaper%20(69).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Blog脚本编写"/></a><div class="content"><a class="title" href="/2024/07/07/%E5%8D%9A%E5%AE%A2%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99/" title="Blog脚本编写">Blog脚本编写</a><time datetime="2024-07-07T03:03:50.000Z" title="發表於 2024-07-07 11:03:50">2024-07-07</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/WallPaper%20(71).jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Kalyan</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主題 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="閱讀模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="淺色和深色模式轉換"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="單欄和雙欄切換"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="設定"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目錄"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直達評論"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到頂部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://www.kalyan-dao.space/',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://www.kalyan-dao.space/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="https://cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>