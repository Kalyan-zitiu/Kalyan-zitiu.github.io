<!DOCTYPE html><html lang="zh-TW" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>MP | Kalyan的小书房</title><meta name="keywords" content="开发工具"><meta name="author" content="Kalyan,3148862192@qq.com"><meta name="copyright" content="Kalyan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="MyBatis Plus简介特点 无侵入：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑 损耗小：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作 强大的 CRUD 操作：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求 支持 Lambda 形式调用：通过 Lambda 表达式，方便">
<meta property="og:type" content="article">
<meta property="og:title" content="MP">
<meta property="og:url" content="https://kalyan-zitiu.github.io/2023/05/06/mybatis/index.html">
<meta property="og:site_name" content="Kalyan的小书房">
<meta property="og:description" content="MyBatis Plus简介特点 无侵入：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑 损耗小：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作 强大的 CRUD 操作：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求 支持 Lambda 形式调用：通过 Lambda 表达式，方便">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://kalyan-zitiu.github.io/img/WallPaper%20(40).jpg">
<meta property="article:published_time" content="2023-05-06T09:32:04.000Z">
<meta property="article:modified_time" content="2023-08-12T07:41:19.125Z">
<meta property="article:author" content="Kalyan">
<meta property="article:tag" content="开发工具">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://kalyan-zitiu.github.io/img/WallPaper%20(40).jpg"><link rel="shortcut icon" href="/img/%E9%A1%B6%E9%83%A8%E6%A0%87%E7%AD%BE(2).jpg"><link rel="canonical" href="https://kalyan-zitiu.github.io/2023/05/06/mybatis/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '複製成功',
    error: '複製錯誤',
    noSupport: '瀏覽器不支援'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '剛剛',
    min: '分鐘前',
    hour: '小時前',
    day: '天前',
    month: '個月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MP',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-08-12 15:41:19'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Kalyan的小书房" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">載入中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/%E5%A4%B4.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">42</div></a><a href="/tags/"><div class="headline">標籤</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分類</div><div class="length-num">34</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 時間軸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清單</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音樂</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友鏈</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/WallPaper%20(40).jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Kalyan的小书房</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 時間軸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清單</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音樂</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友鏈</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">MP</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">發表於</span><time class="post-meta-date-created" datetime="2023-05-06T09:32:04.000Z" title="發表於 2023-05-06 17:32:04">2023-05-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新於</span><time class="post-meta-date-updated" datetime="2023-08-12T07:41:19.125Z" title="更新於 2023-08-12 15:41:19">2023-08-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Study-Note/">Study Note</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Study-Note/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="MP"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">閱讀量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="MyBatis-Plus"><a href="#MyBatis-Plus" class="headerlink" title="MyBatis Plus"></a>MyBatis Plus</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul>
<li>无侵入：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑</li>
<li>损耗小：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作</li>
<li>强大的 CRUD 操作：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求</li>
<li>支持 Lambda 形式调用：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li>
<li>支持主键自动生成：支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解决主键问题</li>
<li>支持 ActiveRecord 模式：支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操作</li>
<li>支持自定义全局通用操作：支持全局通用方法注入（ Write once, use anywhere ）</li>
<li>内置代码生成器：采用代码或者 Maven 插件可快速生成 Mapper 、 Model 、 Service 、 Controller 层代码，支持模板引擎，更有超多自定义配置等您来使用</li>
<li>内置分页插件：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询</li>
<li>分页插件支持多种数据库：支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、SQLServer 等多种数据库</li>
<li>内置性能分析插件：可输出 Sql 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</li>
<li>内置全局拦截插件：提供全表 delete 、 update 操作智能分析阻断，也可自定义拦截规则，预防误操作<h4 id="什么是MyBatisPlus"><a href="#什么是MyBatisPlus" class="headerlink" title="什么是MyBatisPlus"></a>什么是MyBatisPlus</h4></li>
<li>MyBatis是一款优秀的持久层框架，用于简化JDBC开发</li>
<li>MyBatisPlus是基于MyBatis框架基础上开发的增强型工具，皆在<strong>简化开发，提高效率</strong></li>
</ul>
<h4 id="持久层"><a href="#持久层" class="headerlink" title="持久层"></a>持久层</h4><ul>
<li>负责将数据保存倒数据库那一层代码</li>
<li>JavaEE三层架构：表现层，业务层，持久层</li>
</ul>
<h4 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h4><ul>
<li>框架就是一个半成品软件，是一套可重用的，通用的，软件基础代码模型</li>
<li>在框架的基础之上构建软件编写更加高效，规范，通用，可扩展</li>
</ul>
<h3 id="入门案列"><a href="#入门案列" class="headerlink" title="入门案列"></a>入门案列</h3><ul>
<li>SpringBoot整合MyBatis开发过程<ul>
<li>创建SpringBoot工程</li>
<li>勾选配置使用的技术</li>
<li>设置dataSource相关属性（JDBC参数）</li>
<li>定义数据层接口映射配置<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Spring:</span><br><span class="line">  datasource:</span><br><span class="line">    type: com.alibaba.druid.pool.DruidDataSource</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">    url: jdbc:mysql:<span class="comment">//localhost:3306/mybatisplus_db?serverTimezone = UTC</span></span><br><span class="line">    username: ？</span><br><span class="line">    password: ？</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;?&gt;&#123;</span><br><span class="line"><span class="meta">@select(&quot;select * from user where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">getById</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="实际操作"><a href="#实际操作" class="headerlink" title="实际操作"></a>实际操作</h4><h5 id="创建SpringBoot工程"><a href="#创建SpringBoot工程" class="headerlink" title="创建SpringBoot工程"></a>创建SpringBoot工程</h5><pre><code>![image-20230503171102161](https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/image-20230503171102161.png)
</code></pre>
<h5 id="添加依赖MySQL-Driver"><a href="#添加依赖MySQL-Driver" class="headerlink" title="添加依赖MySQL Driver"></a>添加依赖MySQL Driver<img src="https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/image-20230503171325952.png" alt="image-20230503171325952"></h5><h5 id="打开xml文件，手动添加mybatis-plus-boot-start依赖"><a href="#打开xml文件，手动添加mybatis-plus-boot-start依赖" class="headerlink" title="打开xml文件，手动添加mybatis-plus-boot-start依赖"></a>打开xml文件，手动添加mybatis-plus-boot-start依赖</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h6 id="mybatis-plus-boot-start"><a href="#mybatis-plus-boot-start" class="headerlink" title="mybatis-plus-boot-start"></a>mybatis-plus-boot-start</h6><p>这是Maven依赖，用于引入MyBatis Plus框架的快速启动器。MyBatis Plus是一个增强版的MyBatis框架，提供了许多MyBatis没有的方便实用的功能，例如自动代码生成、分页插件、多数据源支持、性能优化等。</p>
<p>在pom.xml中引入了这个依赖后，就可以开始使用MyBatis Plus。可以在配置文件中添加MyBatis Plus的配置，如：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">mybatis-plus:</span><br><span class="line">  typeAliasesPackage: com.example.demo.entity</span><br><span class="line">  mapperLocations: classpath:/mapper/*.xml</span><br><span class="line">  global-config:</span><br><span class="line">    db-config:</span><br><span class="line">      column-underscore: true</span><br><span class="line">      id-type: auto</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在这里，typeAliasesPackage是指实体类所在的包，mapperLocations是指MyBatis mapper XML文件的位置，global-config是MyBatis Plus的全局配置，在这里修改了ID的生成策略和开启了下划线到驼峰命名的自动转换。</p>
<p>然后，可以像平常一样编写MyBatis mapper XML文件和DAO接口，如：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- demo.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.demo.dao.DemoDAO&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.example.demo.entity.DemoEntity&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;create_time&quot;</span> <span class="attr">property</span>=<span class="string">&quot;createTime&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;update_time&quot;</span> <span class="attr">property</span>=<span class="string">&quot;updateTime&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;listByParam&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">        select * from demo</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span> and name = #&#123;name&#125; <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != null&quot;</span>&gt;</span> and age = #&#123;age&#125; <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 其他的SQL语句... --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">// DemoDAO.java</span><br><span class="line">@Mapper</span><br><span class="line">public interface DemoDAO extends BaseMapper<span class="tag">&lt;<span class="name">DemoEntity</span>&gt;</span> &#123;</span><br><span class="line">    List<span class="tag">&lt;<span class="name">DemoEntity</span>&gt;</span> listByParam(@Param(&quot;name&quot;) String name, @Param(&quot;age&quot;) Integer age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在编写DAO接口时，可以继承MyBatis Plus提供的BaseMapper&lt; T &gt;接口，该接口提供了许多便捷的CRUD方法。此外，也可以编写自定义SQL语句，既具有MyBatis的灵活性，又能充分利用MyBatis Plus提供的便利性。最后，在使用DAO接口时，可以像平常一样使用Spring的@Autowired注解来注入DAO对象，例如：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">@Autowired</span><br><span class="line">private DemoDAO demoDAO;</span><br><span class="line"></span><br><span class="line">public void test() &#123;</span><br><span class="line">    QueryWrapper<span class="tag">&lt;<span class="name">DemoEntity</span>&gt;</span> queryWrapper = new QueryWrapper<span class="tag">&lt;&gt;</span>();</span><br><span class="line">    queryWrapper.eq(&quot;name&quot;, &quot;张三&quot;).eq(&quot;age&quot;, 25);</span><br><span class="line">    demoDAO.selectList(queryWrapper);</span><br><span class="line">    // TODO: 使用查询到的数据进行操作</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="打开xml文件，手动添加com-baomidou依赖"><a href="#打开xml文件，手动添加com-baomidou依赖" class="headerlink" title="打开xml文件，手动添加com.baomidou依赖"></a>打开xml文件，手动添加com.baomidou依赖</h6><p>这是Maven依赖，用于引入MyBatis Plus框架的快速启动器。MyBatis Plus是一个增强版的MyBatis框架，提供了许多MyBatis没有的方便实用的功能，例如自动代码生成、分页插件、多数据源支持、性能优化等。</p>
<p>在pom.xml中引入了这个依赖后，就可以开始使用MyBatis Plus。可以在配置文件中添加MyBatis Plus的配置，如：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">typeAliasesPackage:</span> <span class="string">com.example.demo.entity</span></span><br><span class="line">  <span class="attr">mapperLocations:</span> <span class="string">classpath:/mapper/*.xml</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">column-underscore:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br></pre></td></tr></table></figure>

<p>在这里，typeAliasesPackage是指实体类所在的包，mapperLocations是指MyBatis mapper XML文件的位置，global-config是MyBatis Plus的全局配置，在这里修改了ID的生成策略和开启了下划线到驼峰命名的自动转换。</p>
<p>然后，可以像平常一样编写MyBatis mapper XML文件和DAO接口，如：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- demo.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.demo.dao.DemoDAO&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.example.demo.entity.DemoEntity&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;create_time&quot;</span> <span class="attr">property</span>=<span class="string">&quot;createTime&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;update_time&quot;</span> <span class="attr">property</span>=<span class="string">&quot;updateTime&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;listByParam&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">        select * from demo</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span> and name = #&#123;name&#125; <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != null&quot;</span>&gt;</span> and age = #&#123;age&#125; <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 其他的SQL语句... --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// DemoDAO.java</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DemoDAO</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;DemoEntity&gt; &#123;</span><br><span class="line">    List&lt;DemoEntity&gt; <span class="title function_">listByParam</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name, <span class="meta">@Param(&quot;age&quot;)</span> Integer age)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在编写DAO接口时，可以继承MyBatis Plus提供的BaseMapper&lt; T &gt;接口，该接口提供了许多便捷的CRUD方法。此外，也可以编写自定义SQL语句，既具有MyBatis的灵活性，又能充分利用MyBatis Plus提供的便利性。</p>
<p>最后，在使用DAO接口时，可以像平常一样使用Spring的@Autowired注解来注入DAO对象，例如：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> DemoDAO demoDAO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    QueryWrapper&lt;DemoEntity&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;张三&quot;</span>).eq(<span class="string">&quot;age&quot;</span>, <span class="number">25</span>);</span><br><span class="line">    demoDAO.selectList(queryWrapper);</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 使用查询到的数据进行操作</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>MyBatis Plus提供了许多易用的API，通过使用它们可以大大提升代码的开发效率。</p>
<h5 id="配置resources"><a href="#配置resources" class="headerlink" title="配置resources"></a>配置resources</h5><ol>
<li>添加datasource<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatisplus?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">?</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">?</span></span><br></pre></td></tr></table></figure>
<h5 id="创建实体类"><a href="#创建实体类" class="headerlink" title="创建实体类"></a>创建实体类</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//以上图为例</span></span><br><span class="line">ackage domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="comment">//这里用到了lombok，后续会讲</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="核心功能"><a href="#核心功能" class="headerlink" title="核心功能"></a>核心功能</h3><table>
<thead>
<tr>
<th>操作类型</th>
<th>方法调用示例</th>
<th>SQL示例</th>
</tr>
</thead>
<tbody><tr>
<td>插入操作</td>
<td><code>mapper.insert(entity);</code></td>
<td><code>INSERT INTO table (column1, column2, ...) VALUES (?, ?, ...);</code></td>
</tr>
<tr>
<td>更新操作</td>
<td><code>mapper.updateById(entity);</code></td>
<td><code>UPDATE table SET column1=?, column2=?, ... WHERE id=?;</code></td>
</tr>
<tr>
<td>删除操作</td>
<td><code>mapper.deleteById(1);</code></td>
<td><code>DELETE FROM table WHERE id=?;</code></td>
</tr>
<tr>
<td>查询单个对象</td>
<td><code>mapper.selectById(1);</code></td>
<td><code>SELECT * FROM table WHERE id=?;</code></td>
</tr>
<tr>
<td>查询多个对象</td>
<td><code>mapper.selectList(null);</code></td>
<td><code>SELECT * FROM table;</code></td>
</tr>
<tr>
<td>条件查询</td>
<td><code>mapper.selectList(queryWrapper);</code></td>
<td><code>SELECT * FROM table WHERE column1=value1 AND column2&gt;value2;</code></td>
</tr>
<tr>
<td>分页查询</td>
<td><code>mapper.selectPage(page, queryWrapper);</code></td>
<td><code>SELECT COUNT(1) FROM table; SELECT * FROM table WHERE column1=value1 LIMIT startIndex, pageSize;</code></td>
</tr>
</tbody></table>
<h3 id="实体类开发工具lombok"><a href="#实体类开发工具lombok" class="headerlink" title="实体类开发工具lombok"></a>实体类开发工具lombok</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//依赖导入</span></span><br><span class="line">&lt;!-- Lombok --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">1.18</span><span class="number">.20</span>&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>以下是 Lombok 常用的注解和对应的方法：</p>
<table>
<thead>
<tr>
<th>注解</th>
<th>解释</th>
<th>方法示例</th>
</tr>
</thead>
<tbody><tr>
<td>@Data</td>
<td>自动生成各种方法，包括 getter/setter/toString/hashCode/equals</td>
<td><code>@Data class T &#123;private String name;&#125;</code></td>
</tr>
<tr>
<td>@Getter/@Setter</td>
<td>自动生成 getter/setter 方法</td>
<td><code>@Getter @Setter private String name;</code></td>
</tr>
<tr>
<td>@ToString</td>
<td>自动生成 toString 方法</td>
<td><code>@ToString(of = &#123;&quot;name&quot;, &quot;age&quot;&#125;) class T &#123;private String name; private int age;&#125;</code></td>
</tr>
<tr>
<td>@EqualsAndHashCode</td>
<td>自动生成 hashCode 和 equals 方法</td>
<td><code>@EqualsAndHashCode(of = &#123;&quot;name&quot;, &quot;age&quot;&#125;) class T &#123;private String name; private int age;&#125;</code></td>
</tr>
<tr>
<td>@NoArgsConstructor</td>
<td>自动生成无参构造方法</td>
<td><code>@NoArgsConstructor class T &#123;&#125;</code></td>
</tr>
<tr>
<td>@RequiredArgsConstructor</td>
<td>自动生成必须参数的构造方法</td>
<td><code>@RequiredArgsConstructor class T &#123; private final String name; private final int age; &#125;</code></td>
</tr>
<tr>
<td>@AllArgsConstructor</td>
<td>自动生成全参构造方法</td>
<td><code>@AllArgsConstructor class T &#123; private String name; private int age; &#125;</code></td>
</tr>
<tr>
<td>@Builder</td>
<td>自动生成建造者模式方法，用于链式调用</td>
<td><code>@Builder class T &#123;private String name; private int age;&#125;</code></td>
</tr>
<tr>
<td>@Slf4j</td>
<td>自动生成 log 变量，方便日志输出</td>
<td><code>@Slf4j class T &#123;private static final Logger log = LoggerFactory.getLogger(T.class);&#125;</code></td>
</tr>
</tbody></table>
<p>使用 Lombok 可以大大简化 POJO 类编写的过程。不需要手动编写重复的 getter/setter/toString/hashCode/equals 等方法，可以提高开发效率。同时，Builder 注解生成的建造者模式方法可以使代码更加简洁易读。</p>
<h3 id="标准分页功能"><a href="#标准分页功能" class="headerlink" title="标准分页功能"></a>标准分页功能</h3><h4 id="boot配置日志开启"><a href="#boot配置日志开启" class="headerlink" title="boot配置日志开启"></a>boot配置日志开启</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">mybatis-plus:</span><br><span class="line"> configuration:</span><br><span class="line">  log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span><br></pre></td></tr></table></figure>
<h4 id="基本方法"><a href="#基本方法" class="headerlink" title="基本方法"></a>基本方法</h4><p>下面是 <code>IPage&lt;T&gt;</code> 接口中常用的方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>List&lt;T&gt; getRecords()</code></td>
<td>获取当前页数据</td>
</tr>
<tr>
<td><code>long getTotal()</code></td>
<td>获取总记录数</td>
</tr>
<tr>
<td><code>IPage&lt;T&gt; setTotal(long total)</code></td>
<td>设置总记录数，并返回当前对象</td>
</tr>
<tr>
<td><code>long getSize()</code></td>
<td>获取当前页大小</td>
</tr>
<tr>
<td><code>IPage&lt;T&gt; setSize(long size)</code></td>
<td>设置当前页大小，并返回当前对象</td>
</tr>
<tr>
<td><code>long getCurrent()</code></td>
<td>获取当前页数</td>
</tr>
<tr>
<td><code>IPage&lt;T&gt; setCurrent(long current)</code></td>
<td>设置当前页数，并返回当前对象</td>
</tr>
<tr>
<td><code>long getPages()</code></td>
<td>获取总页数</td>
</tr>
<tr>
<td><code>IPage&lt;T&gt; setPages(long pages)</code></td>
<td>设置总页数，并返回当前对象</td>
</tr>
<tr>
<td><code>List&lt;OrderItem&gt; orders()</code></td>
<td>获取排序字段信息</td>
</tr>
<tr>
<td><code>IPage&lt;T&gt; setOrders(List&lt;OrderItem&gt; orders)</code></td>
<td>设置排序字段信息，并返回当前对象</td>
</tr>
<tr>
<td><code>boolean optimizeCountSql()</code></td>
<td>是否进行 count SQL 优化</td>
</tr>
<tr>
<td><code>IPage&lt;T&gt; setOptimizeCountSql(boolean optimizeCountSql)</code></td>
<td>设置 count SQL 优化标识，并返回当前对象</td>
</tr>
<tr>
<td><code>boolean isSearchCount()</code></td>
<td>是否进行 count SQL 查询</td>
</tr>
<tr>
<td><code>IPage&lt;T&gt; setSearchCount(boolean isSearchCount)</code></td>
<td>设置 count SQL 查询标识，并返回当前对象</td>
</tr>
<tr>
<td><code>Map&lt;String, Object&gt; condition()</code></td>
<td>获取查询条件信息</td>
</tr>
<tr>
<td><code>IPage&lt;T&gt; setCondition(Map&lt;String, Object&gt; condition)</code></td>
<td>设置查询条件信息，并返回当前对象</td>
</tr>
<tr>
<td><code>List&lt;T&gt; getRecords(boolean optimizeCountSql, boolean isSearchCount)</code></td>
<td>获取当前页数据，并选择是否进行 count SQL 优化和 count SQL 查询</td>
</tr>
<tr>
<td><code>IPage&lt;T&gt; convert(Function&lt;? super T, ? extends U&gt; converter)</code></td>
<td>转换当前 <code>IPage&lt;T&gt;</code> 为 <code>IPage&lt;U&gt;</code></td>
</tr>
</tbody></table>
<h4 id="MP拦截器"><a href="#MP拦截器" class="headerlink" title="MP拦截器"></a>MP拦截器</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//类似于一个插件功能，但是不实现的话就可能实现不了分页功能</span></span><br><span class="line"><span class="keyword">package</span> com.example.mybatisplus.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MPConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mpInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1.定义MP拦截器</span></span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">mpInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">//2.添加具体拦截器</span></span><br><span class="line">        mpInterceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>());</span><br><span class="line">        <span class="keyword">return</span> mpInterceptor;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//同样能够实现上面的方法</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.example.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisConfig</span>&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> PaginationInterceptor <span class="title function_">paginationInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PaginationInterceptor</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="sql语句打印配置，运行日志"><a href="#sql语句打印配置，运行日志" class="headerlink" title="sql语句打印配置，运行日志"></a>sql语句打印配置，运行日志</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">mybatis-plus:</span><br><span class="line">  configuration:</span><br><span class="line">    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span><br></pre></td></tr></table></figure>

<h4 id="杀掉多余得数据显示"><a href="#杀掉多余得数据显示" class="headerlink" title="杀掉多余得数据显示"></a>杀掉多余得数据显示</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">logback.xml</span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">//在Spring工程生成原生得xml进行配置</span><br><span class="line">  global-config:</span><br><span class="line">    banner: false</span><br><span class="line">  main:</span><br><span class="line">    banner-mode: off</span><br></pre></td></tr></table></figure>
<h3 id="DQL编程控制"><a href="#DQL编程控制" class="headerlink" title="DQL编程控制"></a>DQL编程控制</h3><h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><ul>
<li>MyBatisPlus将书写复杂的SQL查询条件进行封装<br><img src="https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/image-20230504224141560.png" alt="image-20230504224141560"></li>
<li>其中Wrapper&lt; T &gt;就是对查询条件的封装</li>
</ul>
<h4 id="添加QueryWrapper对象"><a href="#添加QueryWrapper对象" class="headerlink" title="添加QueryWrapper对象"></a>添加QueryWrapper对象</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">QueryWrapper</span> <span class="variable">qw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>();</span><br><span class="line">qw.lt(<span class="string">&quot;age&quot;</span>,<span class="number">18</span>);</span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th>方法名</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td><code>eq()</code></td>
<td>等于</td>
</tr>
<tr>
<td><code>ne()</code></td>
<td>不等于</td>
</tr>
<tr>
<td><code>gt()</code></td>
<td>大于</td>
</tr>
<tr>
<td><code>ge()</code></td>
<td>大于等于</td>
</tr>
<tr>
<td><code>lt()</code></td>
<td>小于</td>
</tr>
<tr>
<td><code>le()</code></td>
<td>小于等于</td>
</tr>
<tr>
<td><code>between()</code></td>
<td>在两个值之间</td>
</tr>
<tr>
<td><code>notBetween()</code></td>
<td>不在两个值之间</td>
</tr>
<tr>
<td><code>like()</code></td>
<td>模糊查询</td>
</tr>
<tr>
<td><code>notLike()</code></td>
<td>不匹配某个值的模糊查询</td>
</tr>
<tr>
<td><code>isNull()</code></td>
<td>为空</td>
</tr>
<tr>
<td><code>isNotNull()</code></td>
<td>不为空</td>
</tr>
<tr>
<td><code>in()</code></td>
<td>包含在某个集合中</td>
</tr>
<tr>
<td><code>notIn()</code></td>
<td>不包含在某个集合中</td>
</tr>
<tr>
<td><code>groupBy()</code></td>
<td>分组</td>
</tr>
<tr>
<td><code>orderByAsc()</code></td>
<td>升序排序</td>
</tr>
<tr>
<td><code>orderByDesc()</code></td>
<td>降序排序</td>
</tr>
</tbody></table>
<h4 id="lambda格式按条件查询"><a href="#lambda格式按条件查询" class="headerlink" title="lambda格式按条件查询"></a>lambda格式按条件查询</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//其一</span></span><br><span class="line">QueryWrapper&lt; User &gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt; User &gt;();</span><br><span class="line">qw.lamda().lt(User::getAge,<span class="number">18</span>);</span><br><span class="line">List&lt;User&gt; userList = userDao.selectList(qw);</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//其二</span></span><br><span class="line">LambadQueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;User&gt;();</span><br><span class="line">QueryWrapper&lt;User&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;();</span><br><span class="line">qw.lambda().lt(User::getAge,<span class="number">10</span>);</span><br><span class="line">List&lt;User&gt; userList = userDao.selectList(qw);</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>

<h4 id="null值处理"><a href="#null值处理" class="headerlink" title="null值处理"></a>null值处理</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">UserQuery</span> <span class="variable">uq</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserQuery</span>();</span><br><span class="line">uq.setAge2(<span class="number">30</span>);</span><br><span class="line">lqw.lt(<span class="literal">null</span>!=uq.getAge2,User::getAge,uq.getAge2());</span><br><span class="line">List&lt;User&gt; userList = userDao.selectList(lqw);</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>

<h3 id="查询投影"><a href="#查询投影" class="headerlink" title="查询投影"></a>查询投影</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//普通</span></span><br><span class="line">QueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>();</span><br><span class="line">lqw.select(<span class="string">&quot;id&quot;</span>,<span class="string">&quot;name&quot;</span>,<span class="string">&quot;age&quot;</span>,<span class="string">&quot;tel&quot;</span>);</span><br><span class="line">List&lt;User&gt; userList = userDao.selectList(lqw);</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">LambdaQueryWrapper&lt;User&gt; lqw = <span class="keyword">new</span> <span class="title class_">LanbdaQueryWrapper</span>&lt;User&gt;();</span><br><span class="line">lqw.select(User::getId,User::getName,User::getAge);</span><br><span class="line">List&lt;User&gt; userList = userDao.selectList(lqw);</span><br><span class="line">System.out.println(userList);</span><br></pre></td></tr></table></figure>

<h3 id="查询投影-1"><a href="#查询投影-1" class="headerlink" title="查询投影"></a>查询投影</h3><p>MyBatisPlus 查询投影是一种查询方式，主要用于查询部分实体类属性（字段），而不是整个实体类的所有属性。它提高了查询效率，并减少了网络传输和内存消耗。下面是 MyBatisPlus 查询投影的总结：</p>
<ol>
<li><p>查询投影可以通过在实体类中定义一个 VO（View Object）类来实现。这个 VO 类只包含我们需要查询的那些属性，而不是整个实体类。</p>
</li>
<li><p>MyBatisPlus 提供了多种查询方式来实现投影查询，包括普通查询、条件构造器查询、Lambda 表达式查询等。</p>
</li>
<li><p>在使用 MyBatisPlus 进行查询时，可以使用 <code>selectOne()</code>、<code>selectList()</code>、<code>selectMaps()</code> 等方法实现投影查询。</p>
</li>
<li><p>在投影查询中，我们可以使用 <code>select()</code> 方法指定要查询的字段，也可以使用 <code>excludeColumns()</code> 方法排除要查询的字段。</p>
</li>
<li><p>投影查询可以使用 <code>@SqlParser(filter = true)</code> 注解来关闭逻辑删除功能。这个注解告诉 MyBatisPlus 不要将逻辑删除的行返回给查询结果列表。</p>
</li>
<li><p>对于投影查询结果的处理方式，我们可以选择将结果直接映射到实体类中，或者将结果映射到 Map 对象中。</p>
</li>
</ol>
<h3 id="查询条件设置"><a href="#查询条件设置" class="headerlink" title="查询条件设置"></a>查询条件设置</h3><p>MyBatisPlus 提供了多种设置查询条件的方式，以下是 MyBatisPlus 查询条件设置的总结：</p>
<ol>
<li><p>使用实体类作为查询条件。MyBatisPlus 可以自动地将实体类中的非空字段作为查询条件生成 SQL 语句，并将查询结果映射到实体类中。如果存在多个非空字段，它们之间的默认关系是 <code>AND</code>，可以通过注解方式更改其关系为 <code>OR</code>。</p>
</li>
<li><p>使用 <code>Wrapper</code> 对象作为查询条件。<code>Wrapper</code> 类是 MyBatisPlus 提供的一种条件构造器，它可以实现 SQL 语句中常见的条件设置操作，例如 <code>eq()</code>（等于）、<code>ne()</code>（不等于）、<code>like()</code>（模糊查询）等。可以使用 Lambda 表达式来构造 <code>Wrapper</code> 对象，也可以直接使用传统的 SQL 片段。</p>
</li>
<li><p>使用 <code>QueryWrapper</code> 类作为查询条件。<code>QueryWrapper</code> 是 MyBatisPlus 提供的一种常用条件构造器，可以用于设置 <code>WHERE</code> 条件、排序条件、分组条件等。它支持的查询方式比 <code>Wrapper</code> 更加灵活，例如支持 <code>in()</code>（包含）、<code>between()</code>（在两个值之间）等操作。</p>
</li>
<li><p>使用 <code>UpdateWrapper</code> 类作为更新条件。<code>UpdateWrapper</code> 可以用于设置 <code>SET</code> 条件，与 <code>QueryWrapper</code> 类似，也支持 Lambda 表达式和传统的 SQL 片段。</p>
</li>
<li><p>使用 <code>LambdaQueryWrapper</code>、<code>LambdaUpdateWrapper</code> 等 Lambda 类型的查询方式，实现更加简洁的条件设置，例如 <code>lambdaQuery().eq(User::getId, 1)</code>。</p>
</li>
</ol>
<h3 id="映射匹配兼容性"><a href="#映射匹配兼容性" class="headerlink" title="映射匹配兼容性"></a>映射匹配兼容性</h3><p>MyBatisPlus 映射匹配兼容性主要指 MyBatisPlus 在进行映射操作时，与传统 MyBatis XML 映射文件的兼容性问题。以下是 MyBatisPlus 映射匹配兼容性的总结：</p>
<ol>
<li><p>MyBatisPlus 支持与传统 MyBatis XML 映射文件共存，并且支持使用 <code>@MapperScan</code> 注解扫描所有的 Mapper 接口。</p>
</li>
<li><p>MyBatisPlus 中内置了多种自动映射配置方式，包括 <code>AUTO</code>（自动按列名匹配）、<code>FULL</code>（自动映射所有实体属性）、<code>NONE</code>（不进行自动映射）等。</p>
</li>
<li><p>MyBatisPlus 还支持自定义类型处理器、全局配置、实体类表名映射、字段名映射等灵活的映射配置方式。</p>
</li>
<li><p>在使用 MyBatisPlus 进行开发时，需要注意一些 XML 映射文件中的配置不能与 MyBatisPlus 的自动映射方式冲突，例如 <code>resultMap</code>、<code>association</code>、<code>collection</code> 等配置，需要进行合理的调整。</p>
</li>
<li><p>对于一些特殊场景，例如需要进行多表关联查询、复杂的查询构造，或者需要使用 MyBatis 动态 SQL 等功能时，可以继续使用传统的 XML 映射文件进行开发。</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>注解名称</th>
<th>说明</th>
<th>应用举例</th>
</tr>
</thead>
<tbody><tr>
<td><code>@TableId</code></td>
<td>主键字段的映射注解，用于标注实体类中主键字段</td>
<td><code>@TableId(value = &quot;id&quot;, type = IdType.AUTO)</code> 表示将 <code>id</code> 字段设置为自增长主键</td>
</tr>
<tr>
<td><code>@TableField</code></td>
<td>字段映射注解，在实体类字段上使用，用于设置字段与数据库表中列的映射关系</td>
<td><code>@TableField(value = &quot;name&quot;, exist = true, update = &quot;false&quot;)</code> 表示将 <code>name</code> 字段映射到数据库表的 <code>name</code> 列上，且为非更新字段</td>
</tr>
<tr>
<td><code>@TableName</code></td>
<td>表名映射注解，用于标注实体类对应的数据库表名</td>
<td><code>@TableName(&quot;user&quot;)</code> 表示将实体类 <code>User</code> 映射到数据库表 <code>user</code> 上</td>
</tr>
<tr>
<td><code>@KeySequence</code></td>
<td>序列映射注解，用于标注主键对应的序列名称</td>
<td><code>@KeySequence(value = &quot;myseq&quot;, clazz = Integer.class)</code> 表示将主键对应的序列名称设为 <code>myseq</code>，并指定序列类型为 <code>Integer</code></td>
</tr>
</tbody></table>
<h3 id="id生成策略"><a href="#id生成策略" class="headerlink" title="id生成策略"></a>id生成策略</h3><table>
<thead>
<tr>
<th>ID 生成策略</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>ASSIGN_ID</code></td>
<td>自定义 ID 生成器，需要在代码中自行生成 ID 值</td>
</tr>
<tr>
<td><code>ASSIGN_UUID</code></td>
<td>UUID 生成器，使用 JDK 自带的 <code>UUID.randomUUID()</code> 方法生成 UUID</td>
</tr>
<tr>
<td><code>ASSIGN_ID_WORKER</code></td>
<td>雪花算法 ID 生成器，使用 Twitter 的 Snowflake 算法生成全局唯一的 ID</td>
</tr>
<tr>
<td><code>IDENTITY</code></td>
<td>基于数据库的自增长 ID 生成器，数据库类型需要支持自增长</td>
</tr>
<tr>
<td><code>NONE</code></td>
<td>未设置 ID 生成器</td>
</tr>
<tr>
<td><img src="https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/image-20230506120115982.png" alt="image-20230506120115982"></td>
<td></td>
</tr>
</tbody></table>
<h4 id="雪花算法"><a href="#雪花算法" class="headerlink" title="雪花算法"></a>雪花算法</h4><p>雪花算法（Snowflake）是一种唯一ID生成算法。它由Twitter公司开发，用于生成全局唯一的ID。雪花算法的核心思想是在64位的ID中，对不同的部分按照规定的位数进行位移和组合，并使用timestamp作为序列的一部分，可以保证生成的ID全局唯一，且越小的timestamp的序列号越小。</p>
<p>雪花算法的ID格式如下：</p>
<p>其中：</p>
<p>第1位（最高位）未使用，可以根据需求使用，一般为0；<br>第2<del>42位表示timestamp，精确到毫秒级别，总共可以表示2^41-1个数字，约69年；<br>第43</del>52位是机器ID，用于表示生成ID的机器，最多支持2^10=1024个机器；<br>第53~64位是序列号，用于表示同一毫秒内生成的不同ID，支持每毫秒生成2^12-1个ID。<br>使用雪花算法生成的ID具有很高的性能和稳定性，适合用于分布式系统中，例如分布式ID生成、分布式锁等场景。</p>
<p><img src="https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/image-20230506115329072.png" alt="image-20230506115329072"></p>
<h3 id="乐观锁"><a href="#乐观锁" class="headerlink" title="乐观锁"></a>乐观锁</h3><ol>
<li>在表中添加版本控制字段</li>
</ol>
<p>首先，需要在表中添加一个版本控制字段，例如在 User 表中添加一个 version 字段：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> version <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<ol>
<li>在实体类中添加版本控制字段</li>
</ol>
<p>接下来，在实体类中添加版本控制字段：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Version</span> <span class="comment">// 添加版本控制注解</span></span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 省略 getter 和 setter 方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在实体类中，需要添加 <code>@Version</code> 注解，来标识该字段为版本控制字段。</p>
<ol>
<li>在 Mapper 文件中使用乐观锁</li>
</ol>
<p>在 Mapper 文件中进行更新操作时，可以利用 MyBatisPlus 提供的 <code>@Version</code> 注解自动实现乐观锁功能。以下是一个更新 User 表的简单示例：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.example.entity.User&quot;</span>&gt;</span></span><br><span class="line">    update user</span><br><span class="line">    set name = #&#123;name&#125;,</span><br><span class="line">        age = #&#123;age&#125;,</span><br><span class="line">        email = #&#123;email&#125;,</span><br><span class="line">        version = version + 1</span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line">      and version = #&#123;version&#125; <span class="comment">&lt;!-- 添加乐观锁判断 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="MyBatisPlus代码生成器"><a href="#MyBatisPlus代码生成器" class="headerlink" title="MyBatisPlus代码生成器"></a>MyBatisPlus代码生成器</h3><p>MyBatisPlus 提供了一个便捷的代码生成器，可以通过该生成器自动生成 Entity、Mapper、Service 和 Controller 等基础代码，从而加快开发速度，提高效率。以下是 MyBatisPlus 代码生成器的简要总结：</p>
<ol>
<li>配置生成器</li>
</ol>
<p>在 <code>pom.xml</code> 文件中，添加以下依赖：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>同时，在 <code>application.yml</code> 或 <code>application.properties</code> 配置文件中，添加自己的数据库连接信息：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/db_name?characterEncoding=utf8&amp;useUnicode=true&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>配置代码生成器参数</li>
</ol>
<p>在项目中创建一个 <code>generator</code> 包，并创建一个 <code>CodeGenerator</code> 类，用于配置代码生成器参数：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeGenerator</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 代码生成器相关配置</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">projectPath</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">authorName</span> <span class="operator">=</span> <span class="string">&quot;your name&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] tables = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;table_name&quot;</span>&#125;;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">packagePath</span> <span class="operator">=</span> <span class="string">&quot;com.example&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 数据源配置</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/db_name&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">driverName</span> <span class="operator">=</span> <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">AutoGenerator</span> <span class="variable">mpg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AutoGenerator</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 全局配置</span></span><br><span class="line">        <span class="type">GlobalConfig</span> <span class="variable">gc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GlobalConfig</span>();</span><br><span class="line">        gc.setOutputDir(projectPath + <span class="string">&quot;/src/main/java&quot;</span>);</span><br><span class="line">        gc.setAuthor(authorName);</span><br><span class="line">        gc.setOpen(<span class="literal">false</span>);</span><br><span class="line">        gc.setEntityName(<span class="string">&quot;%s&quot;</span>);</span><br><span class="line">        gc.setMapperName(<span class="string">&quot;%sMapper&quot;</span>);</span><br><span class="line">        gc.setXmlName(<span class="string">&quot;%sMapper&quot;</span>);</span><br><span class="line">        gc.setServiceName(<span class="string">&quot;%sService&quot;</span>);</span><br><span class="line">        gc.setServiceImplName(<span class="string">&quot;%sServiceImpl&quot;</span>);</span><br><span class="line">        gc.setControllerName(<span class="string">&quot;%sController&quot;</span>);</span><br><span class="line">        gc.setSwagger2(<span class="literal">false</span>);</span><br><span class="line">        mpg.setGlobalConfig(gc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 数据源配置</span></span><br><span class="line">        <span class="type">DataSourceConfig</span> <span class="variable">dsc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceConfig</span>();</span><br><span class="line">        dsc.setUrl(url);</span><br><span class="line">        dsc.setDriverName(driverName);</span><br><span class="line">        dsc.setUsername(username);</span><br><span class="line">        dsc.setPassword(password);</span><br><span class="line">        mpg.setDataSource(dsc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 包配置</span></span><br><span class="line">        <span class="type">PackageConfig</span> <span class="variable">pc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PackageConfig</span>();</span><br><span class="line">        pc.setParent(packagePath);</span><br><span class="line">        pc.setEntity(<span class="string">&quot;entity&quot;</span>);</span><br><span class="line">        pc.setMapper(<span class="string">&quot;mapper&quot;</span>);</span><br><span class="line">        pc.setXml(<span class="string">&quot;mapper.xml&quot;</span>);</span><br><span class="line">        pc.setService(<span class="string">&quot;service&quot;</span>);</span><br><span class="line">        pc.setServiceImpl(<span class="string">&quot;service.impl&quot;</span>);</span><br><span class="line">        pc.setController(<span class="string">&quot;controller&quot;</span>);</span><br><span class="line">        mpg.setPackageInfo(pc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 策略配置</span></span><br><span class="line">        <span class="type">StrategyConfig</span> <span class="variable">strategy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StrategyConfig</span>();</span><br><span class="line">        strategy.setNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">        strategy.setColumnNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">        strategy.setControllerMappingHyphenStyle(<span class="literal">true</span>);</span><br><span class="line">        strategy.setEntityLombokModel(<span class="literal">true</span>);</span><br><span class="line">        strategy.setTablePrefix(<span class="string">&quot;t_&quot;</span>);</span><br><span class="line">        strategy.setInclude(tables);</span><br><span class="line">        strategy.setVersionFieldName(<span class="string">&quot;version&quot;</span>);</span><br><span class="line">        strategy.setRestControllerStyle(<span class="literal">true</span>);</span><br><span class="line">        strategy.setLogicDeleteFieldName(<span class="string">&quot;deleted&quot;</span>);</span><br><span class="line">        mpg.setStrategy(strategy);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 执行生成</span></span><br><span class="line">        mpg.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在以上代码中，我们可以通过配置相关参数来指定生成器的输出路径、作者名、表名、数据源信息、包路径、策略配置等。在执行 <code>AutoGenerator</code> 对象的 <code>execute()</code> 方法后，MyBatisPlus 就会自动生成相应的 Entity、Mapper、Service 和 Controller 等基础代码，生成的文件都可以在指定的输出路径中找到。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://kalyan-zitiu.github.io">Kalyan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章連結: </span><span class="post-copyright-info"><a href="https://kalyan-zitiu.github.io/2023/05/06/mybatis/">https://kalyan-zitiu.github.io/2023/05/06/mybatis/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版權聲明: </span><span class="post-copyright-info">本部落格所有文章除特別聲明外，均採用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 許可協議。轉載請註明來自 <a href="https://kalyan-zitiu.github.io" target="_blank">Kalyan的小书房</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a></div><div class="post_share"><div class="social-share" data-image="/img/WallPaper%20(40).jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/06/15/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A1%8C%E4%B8%BA/"><img class="prev-cover" src="/img/WallPaper%20(41).jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">设计模型-行为型模式</div></div></a></div><div class="next-post pull-right"><a href="/2023/04/25/2023425%E8%BA%AB%E9%AB%98%E6%8E%92%E5%BA%8F/"><img class="next-cover" src="/img/WallPaper%20(39).jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">2023425</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 評論</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/%E5%A4%B4.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Kalyan</div><div class="author-info__description">晚来天欲雪，能饮一杯无</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">42</div></a><a href="/tags/"><div class="headline">標籤</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分類</div><div class="length-num">34</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Kalyan-zitiu"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://www.douyin.com/user/MS4wLjABAAAA7q-IFMvdT163sFGcjg26o0XaCDYW4pJOLWdkgoDUz10" target="_blank" title="TikTok"><i class="fa-brands fa-tiktok"></i></a><a class="social-icon" href="https://gcore.jsdelivr.net/gh/Kalyan-zitiu/TyporaIMG/img/202211122041246.jpg" target="_blank" title=""><i class="fa-regular fa-user"></i></a><a class="social-icon" href="https://chat.zitiu.top/" target="_blank" title="ChatGPT"><i class="fa-solid fa-robot"></i></a><a class="social-icon" href="https://auto.kalyan-dao.space/" target="_blank" title="AutoGPT"><i class="fa-solid fa-shuttle-space"></i></a><a class="social-icon" href="https://chat.zhile.io/" target="_blank" title="FakeGPT"><i class="fa-brands fa-kickstarter"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Everybody pay attention, I'm the boss</div><timing></timing></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目錄</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis-Plus"><span class="toc-number">1.</span> <span class="toc-text">MyBatis Plus</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">1.1.1.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFMyBatisPlus"><span class="toc-number">1.1.2.</span> <span class="toc-text">什么是MyBatisPlus</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%81%E4%B9%85%E5%B1%82"><span class="toc-number">1.1.3.</span> <span class="toc-text">持久层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6"><span class="toc-number">1.1.4.</span> <span class="toc-text">框架</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A5%E9%97%A8%E6%A1%88%E5%88%97"><span class="toc-number">1.2.</span> <span class="toc-text">入门案列</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%99%85%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.1.</span> <span class="toc-text">实际操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BASpringBoot%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">创建SpringBoot工程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96MySQL-Driver"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">添加依赖MySQL Driver</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%93%E5%BC%80xml%E6%96%87%E4%BB%B6%EF%BC%8C%E6%89%8B%E5%8A%A8%E6%B7%BB%E5%8A%A0mybatis-plus-boot-start%E4%BE%9D%E8%B5%96"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">打开xml文件，手动添加mybatis-plus-boot-start依赖</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#mybatis-plus-boot-start"><span class="toc-number">1.2.1.3.1.</span> <span class="toc-text">mybatis-plus-boot-start</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%89%93%E5%BC%80xml%E6%96%87%E4%BB%B6%EF%BC%8C%E6%89%8B%E5%8A%A8%E6%B7%BB%E5%8A%A0com-baomidou%E4%BE%9D%E8%B5%96"><span class="toc-number">1.2.1.3.2.</span> <span class="toc-text">打开xml文件，手动添加com.baomidou依赖</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEresources"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">配置resources</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-number">1.2.1.5.</span> <span class="toc-text">创建实体类</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD"><span class="toc-number">1.3.</span> <span class="toc-text">核心功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E7%B1%BB%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7lombok"><span class="toc-number">1.4.</span> <span class="toc-text">实体类开发工具lombok</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E5%88%86%E9%A1%B5%E5%8A%9F%E8%83%BD"><span class="toc-number">1.5.</span> <span class="toc-text">标准分页功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#boot%E9%85%8D%E7%BD%AE%E6%97%A5%E5%BF%97%E5%BC%80%E5%90%AF"><span class="toc-number">1.5.1.</span> <span class="toc-text">boot配置日志开启</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%96%B9%E6%B3%95"><span class="toc-number">1.5.2.</span> <span class="toc-text">基本方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MP%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">1.5.3.</span> <span class="toc-text">MP拦截器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sql%E8%AF%AD%E5%8F%A5%E6%89%93%E5%8D%B0%E9%85%8D%E7%BD%AE%EF%BC%8C%E8%BF%90%E8%A1%8C%E6%97%A5%E5%BF%97"><span class="toc-number">1.5.4.</span> <span class="toc-text">sql语句打印配置，运行日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%80%E6%8E%89%E5%A4%9A%E4%BD%99%E5%BE%97%E6%95%B0%E6%8D%AE%E6%98%BE%E7%A4%BA"><span class="toc-number">1.5.5.</span> <span class="toc-text">杀掉多余得数据显示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DQL%E7%BC%96%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">1.6.</span> <span class="toc-text">DQL编程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.6.1.</span> <span class="toc-text">条件查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0QueryWrapper%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.2.</span> <span class="toc-text">添加QueryWrapper对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lambda%E6%A0%BC%E5%BC%8F%E6%8C%89%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.6.3.</span> <span class="toc-text">lambda格式按条件查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#null%E5%80%BC%E5%A4%84%E7%90%86"><span class="toc-number">1.6.4.</span> <span class="toc-text">null值处理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%8A%95%E5%BD%B1"><span class="toc-number">1.7.</span> <span class="toc-text">查询投影</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%8A%95%E5%BD%B1-1"><span class="toc-number">1.8.</span> <span class="toc-text">查询投影</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.9.</span> <span class="toc-text">查询条件设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%A0%E5%B0%84%E5%8C%B9%E9%85%8D%E5%85%BC%E5%AE%B9%E6%80%A7"><span class="toc-number">1.10.</span> <span class="toc-text">映射匹配兼容性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#id%E7%94%9F%E6%88%90%E7%AD%96%E7%95%A5"><span class="toc-number">1.11.</span> <span class="toc-text">id生成策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95"><span class="toc-number">1.11.1.</span> <span class="toc-text">雪花算法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%90%E8%A7%82%E9%94%81"><span class="toc-number">1.12.</span> <span class="toc-text">乐观锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MyBatisPlus%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">1.13.</span> <span class="toc-text">MyBatisPlus代码生成器</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/12/24/saa%E6%A6%82%E5%BF%B5/" title="Conspectus for SAA(updating)"><img src="/img/WallPaper%20(56).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Conspectus for SAA(updating)"/></a><div class="content"><a class="title" href="/2023/12/24/saa%E6%A6%82%E5%BF%B5/" title="Conspectus for SAA(updating)">Conspectus for SAA(updating)</a><time datetime="2023-12-24T12:00:00.000Z" title="發表於 2023-12-24 20:00:00">2023-12-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/24/SAA%E6%8F%90%E7%BA%B2/" title="Basic for SAA(updating)"><img src="/img/WallPaper%20(54).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Basic for SAA(updating)"/></a><div class="content"><a class="title" href="/2023/12/24/SAA%E6%8F%90%E7%BA%B2/" title="Basic for SAA(updating)">Basic for SAA(updating)</a><time datetime="2023-12-24T12:00:00.000Z" title="發表於 2023-12-24 20:00:00">2023-12-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/24/saa%E9%A2%98%E5%BA%93/" title="practise for SAA(updating)"><img src="/img/WallPaper%20(55).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="practise for SAA(updating)"/></a><div class="content"><a class="title" href="/2023/12/24/saa%E9%A2%98%E5%BA%93/" title="practise for SAA(updating)">practise for SAA(updating)</a><time datetime="2023-12-24T12:00:00.000Z" title="發表於 2023-12-24 20:00:00">2023-12-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/30/K8s/" title="CKA基础预览"><img src="/img/WallPaper%20(53).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CKA基础预览"/></a><div class="content"><a class="title" href="/2023/11/30/K8s/" title="CKA基础预览">CKA基础预览</a><time datetime="2023-11-30T07:00:00.000Z" title="發表於 2023-11-30 15:00:00">2023-11-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/22/Bash%20Basic/" title="Bash for Begginners"><img src="/img/WallPaper%20(52).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Bash for Begginners"/></a><div class="content"><a class="title" href="/2023/11/22/Bash%20Basic/" title="Bash for Begginners">Bash for Begginners</a><time datetime="2023-11-22T07:00:00.000Z" title="發表於 2023-11-22 15:00:00">2023-11-22</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/WallPaper%20(40).jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Kalyan</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主題 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="閱讀模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="淺色和深色模式轉換"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="單欄和雙欄切換"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="設定"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目錄"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直達評論"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到頂部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://www.kalyan-dao.space/',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://www.kalyan-dao.space/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="https://cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>